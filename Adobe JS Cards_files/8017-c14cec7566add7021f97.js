(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8017],{3853:function(e,t,n){"use strict";t.UC=t._x=void 0;var r=n(19075);Object.defineProperty(t,"_x",{enumerable:!0,get:function(){return r.ExistingPlanDetails}});var o=n(14631);var a=n(47142);Object.defineProperty(t,"UC",{enumerable:!0,get:function(){return a.ExistingPlanDetailsContentType}})},19075:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ExistingPlanDetails=void 0;const l=a(n(67294)),u=i(n(76202)),c=i(n(6013)),s=n(38712),d=n(47142),p=n(92488),f=n(34937);n(84927);const m=i({existingPlanDetailsContainer:"ExistingPlanDetails__existingPlanDetailsContainer___GqRP1",existingPlanDetailsHeader:"ExistingPlanDetails__existingPlanDetailsHeader___3b77y",existingPlanDetailsTitle:"ExistingPlanDetails__existingPlanDetailsTitle___2xsqy",existingPlanDetails:"ExistingPlanDetails__existingPlanDetails___2Xlvh",existingPlanTerm:"ExistingPlanDetails__existingPlanTerm___3Rhqm",existingPlanTermIcon:"ExistingPlanDetails__existingPlanTermIcon___2dZ3i"}),v=["Enter"," ","Spacebar"];t.ExistingPlanDetails=e=>{const{showAssetMigration:t=!0,existingPlansCount:n,refundAmount:r,onLearnMoreClick:o,cancellingProductName:a,commitmentTerm:i}=e,y=f.useContentEntry(d.ExistingPlanDetailsContentType),g=y.get(d.ExistingPlanDetailsContentType.title),C=y.get(d.ExistingPlanDetailsContentType.learnMoreText),{locale:T}=l.useContext(f.ContentContext);function h(){if("function"===typeof o){const e=p.getLocalizedURL(y.get(d.ExistingPlanDetailsContentType.learnMoreLink),T);o(e)}}return l.default.createElement("div",{className:m.default.existingPlanDetailsContainer},l.default.createElement("div",{className:m.default.existingPlanDetailsHeader},l.default.createElement("div",{className:m.default.existingPlanDetailsTitle,"data-testid":"existing-plan-details-header"},g),C&&l.default.createElement(u.default,{"data-testid":"existing-plan-details-learn-more",className:m.default.productLearnMore,onClick:()=>h(),onKeyDown:e=>function(e){v.includes(e.key)&&(e.preventDefault(),h())}(e)},C)),l.default.createElement("div",{className:m.default.existingPlanDetails},(()=>{const e=y.get(d.ExistingPlanDetailsContentType.allTerms),o=0==r.length?"0":void 0;return(null===e||void 0===e?void 0:e.find((e=>e.refundCount===o))).terms.map(((e,o)=>{const u=d.ExistingPlanTermContentType.createEntry(e).search(s.RichTextContent.JSON),[p,f]=r,v={content:u[0],variables:{refundCount:r.length,refund1:p,refund2:f,plansCount:n,showAssetMigration:Number(t),cancellingProductName:a,commitmentTerm:i}};if(!C){const e=new Map;e.set("learn-more-link",{callback:h,hasPopup:!1}),v.linkCallbacks=e}return l.default.createElement("div",{key:`existing-plan-term-item-${o}`,className:m.default.existingPlanTerm},l.default.createElement("div",{className:m.default.existingPlanTermIcon,"data-testid":"existing-plan-details-term-checkmark"},l.default.createElement(c.default,{role:"presentation",size:"S"})),l.default.createElement(s.MultiFormatText,Object.assign({},v)))}))})()))}},14631:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.TeamUpgradeDelegation=void 0;const o=r(n(67294)),a=n(47142),i=n(34937);n(29219);const l=r({teamUpgradeDelegationContainer:"TeamUpgradeDelegation__teamUpgradeDelegationContainer___Q2PjW",teamUpgradeDelegationTitle:"TeamUpgradeDelegation__teamUpgradeDelegationTitle___2lAby",teamUpgradeDelegationDescription:"TeamUpgradeDelegation__teamUpgradeDelegationDescription___1FtH7",teamUpgradeDelegationDetails:"TeamUpgradeDelegation__teamUpgradeDelegationDetails___1u2Ee",teamUpgradeDelegationCtaButtons:"TeamUpgradeDelegation__teamUpgradeDelegationCtaButtons___3wGeh"}),u=n(58845),c=n(19075);t.TeamUpgradeDelegation=e=>{const{showAssetMigration:t,existingPlansCount:n,refundAmount:r,onLearnMoreClick:s,onKeepPlanButtonClick:d,onCancelPlanButtonClick:p,cancellingProductName:f}=e,m=i.useContentEntry(a.TeamUpgradeDelegationContentType),v=m.get(a.TeamUpgradeDelegationContentType.title),y=m.get(a.TeamUpgradeDelegationContentType.description),g=m.get(a.TeamUpgradeDelegationContentType.cancelPlanButton),C=m.get(a.TeamUpgradeDelegationContentType.keepPlanButton),T=m.get(a.TeamUpgradeDelegationContentType.existingPlanTerms),h={showAssetMigration:t,existingPlansCount:n,refundAmount:r,onLearnMoreClick:s,cancellingProductName:f};return o.default.createElement("div",{className:l.default.teamUpgradeDelegationContainer},o.default.createElement("div",{className:l.default.teamUpgradeDelegationTitle},v),o.default.createElement("div",{className:l.default.teamUpgradeDelegationDescription},y),o.default.createElement("div",{className:l.default.teamUpgradeDelegationDetails},o.default.createElement(i.ContentEntryProvider,{value:T,model:a.ExistingPlanDetailsContentType},o.default.createElement(c.ExistingPlanDetails,Object.assign({},h)))),o.default.createElement("div",{className:l.default.teamUpgradeDelegationCtaButtons},o.default.createElement(u.Button,{variant:"secondary",onPress:d,"data-testid":"keep-my-personal-plan-button"},C),o.default.createElement(u.Button,{variant:"cta",onPress:p,"data-testid":"cancel-plan-button"},g)))}},47142:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TeamUpgradeDelegationContentType=t.ExistingPlanDetailsContentType=t.ExistingPlanTermOptionContentType=t.ExistingPlanTermContentType=void 0;const r=n(34937),o=n(38712);t.ExistingPlanTermContentType=r.defineContents("ExistingPlanTerm",{description:{id:"description",type:o.RichTextContent.JSON}}),t.ExistingPlanTermOptionContentType=r.defineContents("ExistingPlanTermOption",{refundCount:{id:"refundCount",type:"string"},terms:{id:"terms",type:t.ExistingPlanTermContentType,isArray:!0}}),t.ExistingPlanDetailsContentType=r.defineContents("ExistingPlan",{title:{id:"title",type:"string",placeholderContent:"Your existing plan and content"},learnMoreText:{id:"learnMoreText",type:"string",placeholderContent:"Learn more"},learnMoreLink:{id:"learnMoreLink",type:"string",placeholderContent:"https://helpx.adobe.com/enterprise/using/individuals-to-teams-plan-upgrade.html"},allTerms:{id:"allTerms",type:t.ExistingPlanTermOptionContentType,isArray:!0,placeholderContent:[{refundCount:"0",terms:[{description:{json:[{nodeType:"paragraph",content:[{nodeType:"text",value:"Your new team subscription starts immediately."}]}]}},{description:{json:[{nodeType:"paragraph",content:[{nodeType:"text",value:"All the content currently in your Adobe cloud storage will be moved and available in your team plan. "}]}]}}]},{terms:[{description:{json:[{nodeType:"paragraph",content:[{nodeType:"text",value:"Your new teams subscription starts immediately, and you\u2019ll receive a "},{nodeType:"text",value:"{refundCount, plural, \n                        =1 {{refund1} refund }\n                        other {{refund1} refund and  {refund2} refund }\n                      }",format:{variants:["bold"]}},{nodeType:"text",value:"in 3-5 business days for your canceled individual {plansCount, plural, =1 {subscription} other {subscriptions}}."}]}]}},{description:{json:[{nodeType:"paragraph",content:[{nodeType:"text",value:"All the content currently in your Adobe cloud storage will be moved and available in your team plan. "}]}]}}]}]}}),t.TeamUpgradeDelegationContentType=r.defineContents("TeamUpgradeDelegation",{title:{id:"title",type:"string",placeholderContent:"Make the most of your Business Plan"},subtitle:{id:"subtitle",type:"string",placeholderContent:"If you cancel your individual subscription:"},description:{id:"description",type:"string",placeholderContent:"Would you like to cancel your existing individual subscription and move your content to your team's storage?"},keepPlanButton:{id:"keepPlanButton",type:"string",placeholderContent:"Keep my personal plan"},cancelPlanButton:{id:"cancelPlanButton",type:"string",placeholderContent:"Cancel my plan"},existingPlanTerms:{id:"existingPlanTerms",type:t.ExistingPlanDetailsContentType,placeholderContent:{title:"If you cancel your Individual subscription:",learnMoreText:"",allTerms:[{refundCount:"0",terms:[{description:{json:[{nodeType:"paragraph",content:[{nodeType:"text",value:"Your new team subscription starts immediately."}]}]}},{description:{json:[{nodeType:"paragraph",content:[{nodeType:"text",value:"All the content currently in your Adobe cloud storage will be moved and available in your team plan. "}]}]}}]},{terms:[{description:{json:[{nodeType:"paragraph",content:[{nodeType:"text",value:"Your new teams subscription starts immediately, and you\u2019ll receive a "},{nodeType:"text",value:"{refundCount, plural, \n                          =1 {{refund1} refund }\n                          other {{refund1} refund and  {refund2} refund }\n                        }",format:{variants:["bold"]}},{nodeType:"text",value:"in 3-5 business days for your canceled individual {plansCount, plural, =1 {subscription} other {subscriptions}}."}]}]}},{description:{json:[{nodeType:"paragraph",content:[{nodeType:"text",value:"{showAssetMigration, plural, =1 {All content currently in your Adobe cloud storage will be moved and available in your new plan.} other {}}"},{nodeType:"link",data:{href:"#",target:"_blank",class:"learn-more-link"},value:"{showAssetMigration, plural, =1 {Learn more} other {}}"}]}]}}]}]}}})},83801:function(e,t,n){"use strict";t.q1=t.Kd=void 0;var r=n(11836);Object.defineProperty(t,"Kd",{enumerable:!0,get:function(){return r.PaymentTerms}});var o=n(17047);Object.defineProperty(t,"q1",{enumerable:!0,get:function(){return o.PaymentTermsModel}})},11836:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PaymentTerms=void 0;const o=n(34937),a=n(38712),i=n(97039),l=r(n(67294));n(31144);const u=r({termsContainer:"PaymentTerms__termsContainer___1-XYt"}),c=n(17047);t.PaymentTerms=e=>{var t;const{price:n,cancelDate:r,term:s,country:d,isTaxInclusive:p}=e.data,f=o.useContentEntry(c.PaymentTermsModel),m=f.search(c.PriceLabelType),{formatString:v,usePrecision:y}=n,g={data:{price:n.price,formatString:v},options:Object.assign({usePrecision:y},null===(t=e.options)||void 0===t?void 0:t.priceOptions)},C=l.default.createElement(i.InlinePrice,Object.assign({},g)),{json:T}=f.get(c.PaymentTermsModel.terms),h=m.filter((e=>{var t,n;const r=null!==(t=e.get(c.PriceLabelType.countries))&&void 0!==t?t:"",o=null!==(n=e.get(c.PriceLabelType.taxStatus))&&void 0!==n?n:"",a=p?"taxInclusive":"taxExclusive";return r.includes(d)&&o===a})),P=h.length?h[0].get(c.PriceLabelType.priceLabel):"",b={json:T,dataTestId:"payment-terms",variables:{formattedPrice:C,cancelDate:r.getTime(),country:d,priceLabel:P,term:s}};return l.default.createElement("div",{className:u.default.termsContainer},l.default.createElement(a.MultiFormatJson,Object.assign({},b)))}},17047:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PaymentTermsModel=t.PriceLabelType=void 0;const r=n(34937),o=n(38712);t.PriceLabelType=r.defineContents("PriceLabel",{priceLabel:{id:"priceLabel",type:"string"},countries:{id:"countries",type:"string"},taxStatus:{id:"taxStatus",type:"string"}}),t.PaymentTermsModel=r.defineContents("PaymentTermsModel",{terms:{id:"terms",type:o.RichTextContent.JSON,description:"Payment terms",placeholderContent:{json:[{nodeType:"paragraph",content:[{nodeType:"text",value:'By clicking "Agree and subscribe," you agree: '},{nodeType:"text",value:"You will be charged {formattedPrice} {priceLabel} {term, select, MONTHLY { monthly and at the end of your one-year term } other { annually }}, your subscription will automatically renew {country, select, US { monthly} MX { monthly} other { annually}} until you cancel (price subject to change). No annual commitment required after the first year. Cancel anytime via ",format:{variants:["bold"]}},{nodeType:"link",data:{href:"https://www.adobe.com/go/csupport_subscripterms",target:"_blank"},format:{variants:["bold"]},value:"Customer Support"},{nodeType:"text",value:". Cancel before {cancelDate, date, ::MMMddy} to get a full refund and avoid a fee. You also agree to the "},{nodeType:"link",data:{href:"https://www.adobe.com/go/termsofuse",target:"_blank"},value:"Terms of Use"},{nodeType:"text",value:" and the "},{nodeType:"link",data:{class:"payment-terms-link",href:"#"},value:"Subscription and Cancellation Terms."}]}]}},priceLabel:{id:"priceLabel",type:t.PriceLabelType,isArray:!0,placeholderContent:[{priceLabel:"(excl. GST)",countries:"AU,NZ",taxStatus:"taxExclusive"},{priceLabel:"(excl. tax)",countries:"US,JP",taxStatus:"taxExclusive"},{priceLabel:"(excl. VAT)",countries:"GB,KR,DE,FR",taxStatus:"taxExclusive"},{priceLabel:"(incl. GST)",countries:"AU,NZ",taxStatus:"taxInclusive"},{priceLabel:"(incl. tax)",countries:"US,JP",taxStatus:"taxInclusive"},{priceLabel:"(incl. VAT)",countries:"GB,KR,DE,FR",taxStatus:"taxInclusive"}]}})},5673:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unsafeQueryParams=t.referrerMap=t.isSuspiciousCharRegex=t.isIntegerRegex=t.isJWTRegex=t.imsEmailRegex=void 0,t.imsEmailRegex=new RegExp("^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+(?:[a-z]*)\\b$","i"),t.isJWTRegex=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/,t.isIntegerRegex=/^\d+$/,t.isSuspiciousCharRegex=/[<>"'`]/,t.referrerMap=[{regex:/^https?:\/\/(ims-[^.]*\.adobelogin)\.com\.?($|\/)/,replacement:"https://SUSI_ADOBE_LOGIN"},{regex:/^https?:\/\/(adobeid-[^.]*\.services\.adobe)\.com\.?($|\/)/,replacement:"https://SUSI_ADOBE_ID"},{regex:/^https?:\/\/(auth|auth-[^.]*)\.services\.adobe\.com\.?($|\/)/,replacement:"https://SUSI_ADOBE_ID"}],t.unsafeQueryParams=new Set(["access_token","code","state","client_secret","puser","ijt"])},57011:function(e,t,n){"use strict";var r=n(48764).Buffer,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.defaultDecoder=t.hasSuspiciousChar=t.isInteger=t.isEmail=t.isJWT=void 0;const a=n(5673),i=o(n(68079)),l=o(n(98686));function u(e){return a.isIntegerRegex.test(e)}function c(e){return a.isSuspiciousCharRegex.test(e)}t.isJWT=function(e){let t=a.isJWTRegex.test(e);if(t)try{const t=e.substring(0,e.indexOf(".")),n="undefined"===typeof window?r.from(t,"base64").toString("utf-8"):atob(t);JSON.parse(n)}catch(n){t=!1}return t},t.isEmail=function(e){return a.imsEmailRegex.test(e)},t.isInteger=u,t.hasSuspiciousChar=c,t.defaultDecoder=(e,t,n,r)=>{const o=t(e,void 0,n,r);if("value"===r){if(u(o))return parseInt(o,10);if(i.default(o))return encodeURI(o);if(c(o))return l.default(o)}return o}},60196:function(e,t,n){"use strict";var r=n(21338);Object.defineProperty(t,"oY",{enumerable:!0,get:function(){return r.redactDocumentReferrer}})},21338:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.splitUrl=t.redactDocumentReferrer=t.redactPath=t.redactParameters=void 0;const r=n(5673),o=n(57011),a=n(80129);function i(e,t=r.unsafeQueryParams){if(!e||!Object.keys(e).length)return;const n=Object.assign({},e);return Object.keys(n).forEach((e=>{const r=n[e];(t.has(e)&&r||o.isEmail(r)||o.isJWT(r))&&(n[e]="REDACTED")})),n}function l(e){return null===e||void 0===e?void 0:e.replace(/\/([^/]*)/g,((e,t)=>o.isJWT(t)?"/REDACTED":e))}function u(e,t=!0){const n=new URL(e),r=t?o.defaultDecoder:void 0;return{url:n.origin+n.pathname,params:a.parse(n.search,{ignoreQueryPrefix:!0,decoder:r})}}t.redactParameters=i,t.redactPath=l,t.redactDocumentReferrer=function(e,t=r.unsafeQueryParams){if(!e)return;const n=u(function(e){const t=r.referrerMap.find((function(t){return t.regex.test(e)}));return t?t.replacement:e}(e));return{url:l(n.url),params:i(n.params,t)}},t.splitUrl=u},68079:function(e){e.exports=function(e){if("string"!==typeof e)return!1;var o=e.match(t);if(!o)return!1;var a=o[1];if(!a)return!1;if(n.test(a)||r.test(a))return!0;return!1};var t=/^(?:\w+:)?\/\/(\S+)$/,n=/^localhost[\:?\d]*(?:[^\:?\d]\S*)?$/,r=/^[^\s\.]+\.\S{2,}$/},98686:function(e,t,n){var r="[object Symbol]",o=/[&<>"'`]/g,a=RegExp(o.source),i="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,l="object"==typeof self&&self&&self.Object===Object&&self,u=i||l||Function("return this")();var c,s=(c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},function(e){return null==c?void 0:c[e]}),d=Object.prototype.toString,p=u.Symbol,f=p?p.prototype:void 0,m=f?f.toString:void 0;function v(e){if("string"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&d.call(e)==r}(e))return m?m.call(e):"";var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t}e.exports=function(e){var t;return(e=null==(t=e)?"":v(t))&&a.test(e)?e.replace(o,s):e}},30137:function(e,t,n){"use strict";n.d(t,{b:function(){return P},t:function(){return le}});var r=n(67294),o=n(12398),a=n(93101),i=n(69429),l=n(298),u=n(65455),c=n(49313),s=n(34937),d=(0,s.defineContents)("externalworkflowpage",{headerDefault:{id:"headerDefault",type:"string",placeholderContent:"If you've made your purchase, get started now. (PH)"},messageDefault:{id:"messageDefault",type:"string",placeholderContent:"Please complete the purchase in your web browser. If you would like to purchase later, you can cancel now. (PH)"},cancelButtonDefault:{id:"cancelButtonDefault",type:"string",placeholderContent:"Cancel (PH)"},continueButtonDefault:{id:"continueButtonDefault",type:"string",placeholderContent:"Get Started (PH)"},headerChangePlan:{id:"headerChangePlan",type:"string",placeholderContent:"Switch your plan in your Adobe Account. (PH)"},messageChangePlan:{id:"messageChangePlan",type:"string",placeholderContent:"Once you are done, come back here and click Continue to proceed. If you would like to continue later, you can cancel for now. (PH)"},cancelButtonChangePlan:{id:"cancelButtonChangePlan",type:"string",placeholderContent:"Cancel (PH)"},continueButtonChangePlan:{id:"continueButtonChangePlan",type:"string",placeholderContent:"Continue (PH)"}}),p=n(8703),f=n(54536),m=n(52253),v=n(30488),y=n(12510),g=n(52007),C=n(66482),T=n(36015),h=r.createElement,P=(0,C.c)("checkout/external",d.__contentType,d)((function(e){var t=e.workflow,n=(0,s.useContentEntry)(d),C=(0,v.useCommerceAppContext)().emitMessage,P=(0,g.useTrackEvent)();(0,r.useEffect)((function(){var e=(0,l.W6)("".concat(t).concat(m.ps.COMPLETE_PURCHASE_WEB,":").concat(m.ps.MODAL),"".concat(m.ps.COMPLETE_PURCHASE_WEB));P(e)}),[P,t]);var b=function(e){switch(e){case p.q.CHANGE_PLAN:return{header:n.get(d.headerChangePlan),message:n.get(d.messageChangePlan),cancelButton:n.get(d.cancelButtonChangePlan),continueButton:n.get(d.continueButtonChangePlan)};default:return{header:n.get(d.headerDefault),message:n.get(d.messageDefault),cancelButton:n.get(d.cancelButtonDefault),continueButton:n.get(d.continueButtonDefault)}}}(t),E=b.header,O=b.message,_=b.cancelButton,S=b.continueButton,A=(0,y.useStore)(),I=(0,u.jz)(A.getState());return h("div",{className:i.Z.container},!I&&h("div",{className:i.Z.closeContainer},h(o.default,{variant:"action",quiet:!0,onClick:function(){C(v.SystemMessage.CLOSE)},icon:h(a.default,{size:"L"}),"data-testid":"closeButton"})),h("div",{className:i.Z.center},h(f.f,{size:"L","data-testid":"externalWorkflowIcon"}),h(c.X6,null,E),h("p",{className:i.Z.message},O),h("div",{className:i.Z.buttonContainer},h(o.default,{variant:"secondary","data-testid":"externalWorkflowCancelButton",onClick:function(){var e=(0,l.W6)("".concat(t).concat(m.ps.COMPLETE_PURCHASE_WEB,":").concat(m.ps.CANCEL),"".concat(m.ps.COMPLETE_PURCHASE_WEB).concat(m.ps.CANCEL));P(e),C(v.SystemMessage.CLOSE)}},_),h(o.default,{variant:"cta","data-testid":"externalWorkflowContinueButton",onClick:function(){var e=(0,l.W6)("".concat(t).concat(m.ps.COMPLETE_PURCHASE_WEB,":").concat(m.ps.GET_STARTED),"".concat(m.ps.COMPLETE_PURCHASE_WEB).concat(m.ps.GET_STARTED));P(e),C(v.SystemMessage.CLOSE,{shouldTriggerLicenseCheck:!0,status:T.WorkflowStatus.ORDER_COMPLETE})}},S))))})),b=n(26075),E=n(45800),O=n(27261),_=n(76410);function S(){var e=(0,O.Z)(["\n  query UserSubscriptionChangePlanQuery($offerId: ID!, $subscriptionId: ID!) {\n    user {\n      id\n      userSubscription(subscriptionId: $subscriptionId) {\n        id\n        changePlanAllowed(offerId: $offerId)\n      }\n    }\n  }\n"]);return S=function(){return e},e}function A(){var e=(0,O.Z)(["\n  fragment IneligiblePurchaseOrderFragment on Order {\n    marketSegment\n    country\n    cart {\n      cartItems {\n        offerId\n        conflicts {\n          offerId\n          reasonCode\n          subscriptionId\n        }\n      }\n    }\n  }\n"]);return A=function(){return e},e}function I(){var e=(0,O.Z)(["\n  query getOfferForIneligiblePurchaseQuery($offerId: ID!, $country: String!) {\n    offer(id: $offerId, country: $country) {\n      ...IneligiblePurchaseOfferFragment\n    }\n  }\n  ","\n"]);return I=function(){return e},e}function x(){var e=(0,O.Z)(["\n  fragment IneligiblePurchaseOfferFragment on Offer {\n    id\n    commitment\n    term\n    productArrangement {\n      cloud\n      family\n    }\n    offerContent {\n      productName\n      productIconUrls\n    }\n  }\n"]);return x=function(){return e},e}var N=(0,_.Ps)(x()),R=(0,_.Ps)(I(),N),D=(0,_.Ps)(A()),w=(0,_.Ps)(S()),L=function(e,t,n){return e.query({query:R,variables:{offerId:t,country:n}}).then((function(e){return e.data.offer}))},k=n(62482),U=n(36623),M=n(26265),j=n(809),F=n.n(j),Z=n(92447),B=n(38347),W=n(91229),Y=n(85564),q=n.n(Y),G=n(37244),H=n.n(G),K=n(7585),z=n(61792),V=n(73728),$=n(61274),Q=n(62452),J=n(85475),X=r.createElement,ee=function(e){return X(K.a,null,(function(t){return X(te,(0,W.Z)({client:t},e))}))},te=function(e){var t,n=e.client,o=e.openUrl,a=e.onFooterClicked,i=(0,B.Z)(e,["client","openUrl","onFooterClicked"]),l=(0,J.w)(),c=(0,r.useContext)(y.StoreContext),s=(0,y.useStore)(),d=c.getState(),p=(0,u.n$)(d),f=(0,y.useSelector)(U.NO),m=(0,z.hP)(d),v=(0,z.et)(d),g=null===v||void 0===v?void 0:v.userId,C=(0,$.d0)(),T=(0,Q.tD)(),h=T.redirect,P=T.cancelUrl,b=null!==o&&void 0!==o?o:h,O=(0,Q.Sd)(),_=n.readFragment({fragment:D,id:"Order:".concat(f),fragmentName:"IneligiblePurchaseOrderFragment"}),S=(0,r.useCallback)(function(){var e=(0,Z.Z)(F().mark((function e(t,r){return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L(n,t,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[n]),A=(0,r.useCallback)((function(e,t){return function(e,t,n,r){return e.query({query:w,variables:{offerId:t,subscriptionId:n},context:r,fetchPolicy:"network-only"}).then((function(e){var t=(e.data.user||{}).userSubscription;return null===t||void 0===t?void 0:t.changePlanAllowed})).catch((function(){return!1}))}(n,e,t,m?{headers:{authorization:m}}:{})}),[n,m]),I=(0,r.useCallback)(function(){var e=(0,Z.Z)(F().mark((function e(t){var r,o;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,E.FG)(n,t,g,p);case 2:return r=e.sent,o=r.data,e.abrupt("return",{data:o});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[n,p,g]),x=(0,r.useCallback)(function(){var e=(0,Z.Z)(F().mark((function e(t){var n,r,o,a,i,u;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l.info("Checking whether user is eligible for I2T upgrade in case of duplicate purchase"),e.next=3,I(t);case 3:if(i=e.sent,u=i.data,!((null===u||void 0===u||null===(n=u.individualToTeamUpgradeOffers)||void 0===n||null===(r=n.activeOffersResult)||void 0===r?void 0:r.filter((function(e){var t,n;return null===e||void 0===e||null===(t=e.offer)||void 0===t||null===(n=t.tags)||void 0===n?void 0:n.includes("ACTIVE_SUBSCRIPTION_I2T_UPGRADEABLE")}))).length>0&&(null===u||void 0===u||null===(o=u.individualToTeamUpgradeOffers)||void 0===o||null===(a=o.upgradeOffersResult)||void 0===a?void 0:a.offers.length)>0)){e.next=9;break}return l.info("Eligible for i2t upgrade as part of duplicate purchase from A.com"),e.abrupt("return",!0);case 9:return e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[I,l]),N=function(e,t,n){var r,o=null===e||void 0===e||null===(r=e.productArrangement)||void 0===r?void 0:r.family,a=n.find((function(e){return(null===e||void 0===e?void 0:e.paFamily)===o}));return t.includes(null===a||void 0===a?void 0:a.id)},R=(0,r.useCallback)(function(){var e=(0,Z.Z)(F().mark((function e(t){var n,r,o,a,i,u,c,s,d,f,m,v,y,g,C,T,h;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I(t);case 2:d=e.sent,f=d.data,m=null===f||void 0===f||null===(n=f.individualToTeamUpgradeOffers)||void 0===n?void 0:n.activeSubscriptions,v=null===f||void 0===f||null===(r=f.individualToTeamUpgradeOffers)||void 0===r||null===(o=r.activeOffersResult)||void 0===o?void 0:o.map((function(e){return{id:null===e||void 0===e?void 0:e.offer.id,paFamily:null===e||void 0===e?void 0:e.offer.productArrangement.family}})),y=null===f||void 0===f||null===(a=f.individualToTeamUpgradeOffers)||void 0===a||null===(i=a.upgradeOffersResult)||void 0===i?void 0:i.offers,g=null===_||void 0===_||null===(u=_.cart)||void 0===u||null===(c=u.cartItems)||void 0===c?void 0:c.map((function(e){var t;return null===e||void 0===e||null===(t=e.conflicts)||void 0===t?void 0:t.map((function(e){return e.offerId}))})),C=q()(g),T=null===y||void 0===y?void 0:y.map((function(e,t){var n=e.offer;if(t<m.length)return{id:n.id,q:N(n,C,v)?2:1}})).filter((function(e){return void 0!==e})),s={},(0,M.Z)(s,H().app.COUNTRY.name,t),(0,M.Z)(s,H().app.LANGUAGE.name,p),(0,M.Z)(s,H().app.CURRENT_SUBSCRIPTION_IDS.name,m),(0,M.Z)(s,H().app.ITEMS.name,T),h=s,l.info("Redirecting to i2t payment page as part of duplicate purchase from A.com"),O(h);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[I,O,p,_,l]),k=V.j$.IN_WEB,j=null===(t=s.getPersonalizedContentVariationByAEMQueryName)||void 0===t?void 0:t.call(s,"ineligible-purchase-dialogs-list"),Y=j?Object.fromEntries(j.split(";").map((function(e){return e.split("=")}))):void 0;return X(V.jO,(0,W.Z)({fetchOffer:S,fetchUserSubscriptionChangeOfferAllowed:A,fetchIndividualToTeamUpgradeAllowed:x,upgradeIndividualToTeam:R,locale:"zh-hant"===p?"zh_TW":p,switchPlanSurface:k,order:_,openUrl:b,onFooterClicked:a,cancelUrl:P,promoCode:null===C||void 0===C?void 0:C[0],variation:Y},i))},ne=n(56),re=n(37703),oe=r.createElement;function ae(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return ie(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ie(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}function ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var le=function(e){var t=e.children,n=(0,b.x)(),o=(0,ne.TZ)(),a=(0,v.useCommerceAppContext)().isInApp,i=(0,Q.nV)(),l=(0,r.useState)(!1),u=l[0],c=l[1],s=(0,r.useState)(void 0),d=s[0],f=s[1],m=(0,re.useSelector)(U.NO),y=(0,r.useCallback)((function(){var e,t,r=n.readFragment({fragment:D,id:"Order:".concat(m),fragmentName:"IneligiblePurchaseOrderFragment"}),o=ae(null===r||void 0===r||null===(e=r.cart)||void 0===e?void 0:e.cartItems);try{for(o.s();!(t=o.n()).done;){var a,i=ae(t.value.conflicts);try{for(i.s();!(a=i.n()).done;){var l=a.value;if(l.reasonCode)return l.reasonCode}}catch(u){i.e(u)}finally{i.f()}}}catch(u){o.e(u)}finally{o.f()}}),[m,n]);function g(e){switch(e){case E.rg.IneligibleSwitch:case E.rg.IneligibleIncluded:case E.rg.IneligibleDuplicateUpgrade:f(p.q.CHANGE_PLAN);break;default:f(void 0)}}return oe(r.Fragment,null,oe(ee,{openUrl:a()?function(e){g(y()),c(!0);var t=(0,k.AK)(e);i(t)}:void 0,onFooterClicked:a()?function(){g(void 0),c(!0)}:void 0,adobeLaunchAnalytics:o}),u?oe(P,{workflow:d}):t)}},29680:function(e,t,n){"use strict";n.d(t,{V:function(){return d},l:function(){return s}});var r=n(67294),o=n(3151),a=n(34937),i=(0,a.defineContents)("SupportBannerContent",{headline:{id:"headline",type:"string",placeholderContent:"Need to buy more? We can help. To buy more than 250 licenses, we recommend calling our Sales team at {salesPhoneNumber} or chatting with support for help"},ctaLabel:{id:"ctaLabel",type:"string",placeholderContent:"Start Chat"}}),l=n(8969),u=n(10315),c=r.createElement;function s(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(0,r.useState)(e),n=t[0],o=t[1];return{showBanner:n,setShowBanner:o}}var d=(0,u.n)("supportBannerQuantityExceed",i)((function(e){var t=e.ctaClicked,n=e.onClose,r=e.contentVariables,u=void 0===r?{}:r,s=(0,a.useContentEntry)(i),d=s.format(i.headline,u),p=s.get(i.ctaLabel);return c("div",{"data-testid":"support-banner",id:o.Z.bannerContainer},c(l.Toast,{actionLabel:p,closable:!0,onAction:t,onClose:n},d))}))},46576:function(e,t,n){"use strict";n.d(t,{mw:function(){return g},Vk:function(){return P}});var r=n(809),o=n.n(r),a=n(92447),i=n(27261),l=n(76410),u=n(26075),c=n(36623),s=n(61792),d=n(65455),p=n(62452),f=n(37703),m=n(67294),v=n(12510);function y(){var e=(0,i.Z)(["\n  query GET_COUNTRY_CHANGE_ALLOWED {\n    user {\n      id\n      countryChangeAllowed\n    }\n  }\n"]);return y=function(){return e},e}var g="GET_COUNTRY_CHANGE_ALLOWED",C=(0,l.Ps)(y());function T(e,t){return h.apply(this,arguments)}function h(){return(h=(0,a.Z)(o().mark((function e(t,n){var r,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=!1,e.prev=1,!n){e.next=7;break}return e.next=5,t.query({query:C,context:{headers:{Authorization:"Bearer ".concat(n)}},fetchPolicy:"no-cache"});case 5:a=e.sent,r=a.data.user.countryChangeAllowed;case 7:e.next=11;break;case 9:e.prev=9,e.t0=e.catch(1);case 11:return e.abrupt("return",r);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}var P=function(){var e=(0,f.useDispatch)(),t=(0,p.KW)(),n=(0,v.useStore)().getState(),r=(0,s.PQ)(n),i=(0,d.mT)(n),l=(0,s.et)(n).countryCode,y=(0,s.hP)(n),g=(0,c.qr)(n),C=(0,u.x)();(0,m.useEffect)((function(){function n(){return(n=(0,a.Z)(o().mark((function n(){var r,a;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=!0,a=l&&l!==i,n.t0=!g,!n.t0){n.next=7;break}return n.next=6,T(C,y);case 6:n.t0=n.sent;case 7:r=n.t0,a&&!r&&t(l),e((0,s.oY)(r));case 10:case"end":return n.stop()}}),n)})))).apply(this,arguments)}r&&function(){n.apply(this,arguments)}()}),[])}},6804:function(e,t,n){"use strict";n.d(t,{Ux:function(){return p},kg:function(){return d}});n(55988);var r=n(73864),o=["Accordion","AccordionItem","Button","ButtonGroup","Card","CardBody","Dropdown","Overlay","OverlayTrigger","Portal","Provider","Search","Select","Selector","Slider","SwitchBase"],a=!1,i=["findDOMNode"],l=n(4497),u=n(19291),c={name:r.APP_NAME,level:l.zq.INFO,remote:!0,remoteUrl:r.APP_LOG_ENDPOINT,method:"POST",flushInterval:500},s=/((Script error)|webkitExitFullScreen)/i;var d=(0,l.YR)(c);function p(){(0,u.Lf)()&&(function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=/strict(-| )?mode/gi,r=/Unexpected key "\w+" found in previous state received by the reducer/,l=e.error;e.error=function(u){for(var c,s,d=arguments.length,p=new Array(d>1?d-1:0),f=1;f<d;f++)p[f-1]=arguments[f];if(null!==u&&void 0!==u&&null!==(c=u.match)&&void 0!==c&&c.call(u,r)){if(!a)return a=!0,void(t&&e.warn('Suppressing "Unexpected key found warning from Redux, due to Pandora slice injection"'));if(a)return}if(null!==u&&void 0!==u&&null!==(s=u.match)&&void 0!==s&&s.call(u,n)){var m,v=(null===p||void 0===p||null===(m=p[0])||void 0===m?void 0:m.split(",").map((function(e){return e.trim()})))||[];if(v.length&&!v.filter((function(e){return!o.includes(e)})).length)return;if(i.includes(p[0])&&o.includes(null===p||void 0===p?void 0:p.find((function(e){return e!==p[0]}))))return}l.call.apply(l,[e,u].concat(p))},t&&e.warn("Workaround: Ignoring React strict-mode errors originating from spectrum v2 components. Components: ".concat(o.join(", "),". Methods: ").concat(i.join(", "),"."))}(console,!0),function(e){var t=e.onerror;e.onerror=function(e,n,r,o,a){return s.test(e)||d.error({src:n,ln:r,col:o,error:a,label:"uncaught_error"},e),"function"!==typeof t||t(e,n,r,o,a)}}(window))}},47130:function(e,t,n){"use strict";n.d(t,{Z:function(){return f},G:function(){return m}});var r=n(65474),o=n.n(r),a=n(8777),i=n.n(a),l=n(87835),u=n(19291),c=n(49675),s=n(34155),d={keepAlive:!0,timeout:c.L.SOCKET_TIMEOUT};s.env.APP_ENV===l.T.LOCAL&&(d.rejectUnauthorized=!1);var p=(0,u.Lf)()?void 0:new(i().Agent)(d);function f(){return p}function m(){return new(o().Agent)(d)}},94945:function(e,t,n){"use strict";n.d(t,{p:function(){return m},M:function(){return v}});var r=n(26265),o=n(41609),a=n.n(o),i=n(37244),l=n.n(i),u=n(96029),c=n(19291),s=n(2385),d=n(62482);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t,n){var r,o;if(t){for(var a=n||{},i=a.promotionTerm,l=void 0===i?"":i,u=a.promotionTermValue,c=void 0===u?"":u,d=(null===l||void 0===l?void 0:l.toLowerCase())||"",p=(null===c||void 0===c?void 0:c.toString())||"",f=t.toLowerCase(),m=0;m<(null===e||void 0===e?void 0:e.length);m++){var v=e[m],y=v.offerType,g=v.trialTerm,C=v.trialTermUnit;if(f===String(y).toLowerCase())if(t===s.m_.Trial){if(String(C).toLowerCase()===d){if(g===p){r=v;break}g||(o=v)}}else o=v}return r||o}}function v(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!a()(t)){var i=(0,u.vl)(e.store.getState()),s=i[l().app.ITEMS.name].map((function(e,n){return f(f({},e),{},{id:t[n]})})),p=i[l().app.ITEMS.name].length;if((0,c.Lf)()){var m=f(f({},i),{},(0,r.Z)({},l().app.ITEMS.name,s));o&&(m=f(f({},m),{},(0,r.Z)({},l().app.ORIGINAL_OFFER_ID.name,t[p]))),n&&(m=f(f({},m),{},(0,r.Z)({},l().app.RECOMMENDATION_REQUEST_ITEMS.name,s))),e.store.dispatch((0,u.BT)(m))}else{e.req.query[l().app.ITEMS.name]=s,n&&(e.req.query[l().app.RECOMMENDATION_REQUEST_ITEMS.name]=s),o&&(e.req.query[l().app.ORIGINAL_OFFER_ID.name]=t[p]),e.store.dispatch((0,u.BT)(e.req.query));var v=(0,d.tW)(e.req.query),y="".concat(e.req.url.split("?")[0]);e.req.url="".concat(y,"?").concat(v)}}}},7853:function(e,t,n){"use strict";n.d(t,{A:function(){return l},t:function(){return u}});var r=n(27261),o=n(76410);function a(){var e=(0,r.Z)(["\n  mutation UPDATE_PAYPAL_TRANSACTION(\n    $token: String!\n    $status: PayPalTransactionStatus!\n  ) {\n    updatePayPalTransaction(token: $token, status: $status)\n  }\n"]);return a=function(){return e},e}function i(){var e=(0,r.Z)(["\n  query GET_PAYPAL_STATUS($token: String!) {\n    paypalTransaction(token: $token) {\n      status\n    }\n  }\n"]);return i=function(){return e},e}var l=(0,o.Ps)(i()),u=(0,o.Ps)(a())},58886:function(e,t,n){"use strict";n.d(t,{C:function(){return c}});var r=n(809),o=n.n(r),a=n(92447),i=n(61792),l=n(75295),u=n(19291);function c(e,t){return s.apply(this,arguments)}function s(){return(s=(0,a.Z)(o().mark((function e(t,n){var r,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,i.PQ)(t)){e.next=5;break}r=(0,i.hP)(t),e.next=9;break;case 5:if((0,u.Lf)()){e.next=9;break}return e.next=8,(0,l.Y)({},n);case 8:r=e.sent;case 9:return a=r?{headers:{authorization:"Bearer ".concat(r)}}:{},e.abrupt("return",a);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},9777:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Hn}});var r=n(809),o=n.n(r),a=n(32292),i=n(26265),l=n(92447),u=n(67294),c=n(37244),s=n.n(c),d=n(99246),p=n(31549),f=n(1342),m=n(14834),v=n(37361),y=n(26075),g=n(3490),C=n(7967),T=n(42861),h=n(54147),P=n(33670),b=n(36623),E=n(97094),O=n(1025),_=n(23996),S=n(91229),A=n(48290),I=n(784),x=n(27261),N=n(76410);function R(){var e=(0,x.Z)(["\n  fragment CompanyInfoFragment on ChangePlan {\n    id\n    billingContact {\n      companyName\n      companyPhone\n    }\n  }\n"]);return R=function(){return e},e}var D=(0,N.Ps)(R()),w=n(80519);function L(){return{type:w.NI.FORM,code:"COMPANYINFO:FORM_NON_FATAL_ERROR",extensions:{silent:!0}}}var k=n(65455),U=n(29550),M=n(37703),j=n(10315),F=u.createElement,Z=(0,j.n)("companyInfoForm",I.sY)((function(e){var t,n,r=e.companyInfoRef,o=e.companyName,a=e.disableCompanyName,i=e.marketSegment,l=e.submitCallback,u=(0,y.x)(),c=(0,M.useSelector)(k.mT),s=(0,M.useSelector)(b.NO),d=(0,M.useSelector)(A.n);(0,U.pS)(d,L,!1);var p,f,m=u.readFragment({id:"ChangePlan:".concat(s),fragment:D}),v=(0,I.q$)(A.Q).state,g=(null===v||void 0===v||null===(t=v.businessPhone)||void 0===t?void 0:t.value)||(null===m||void 0===m||null===(n=m.billingContact)||void 0===n?void 0:n.companyPhone)||"";o||(o=(null===v||void 0===v||null===(p=v.companyName)||void 0===p?void 0:p.value)||(null===m||void 0===m||null===(f=m.billingContact)||void 0===f?void 0:f.companyName)||"");var C={storeSliceName:A.Q,businessPhone:g,companyName:o,country:c,disableCompanyName:a,marketSegment:i,submitCallback:l};return F(I.ax,(0,S.Z)({ref:r},C))})),B=n(20534),W=n(34937),Y=n(33580),q=n(45633),G=n(37629),H=n(11057),K=n(52253),z=n(3853),V=n(38712),$=(0,W.defineContents)("ExistingPlanTerm",{description:{id:"description",type:V.RichTextContent.JSON}}),Q=(0,W.defineContents)("ExistingPlanTermOption",{refundCount:{id:"refundCount",type:"string"},terms:{id:"terms",type:$,isArray:!0}}),J=(0,W.defineContents)("ExistingPlan",{title:{id:"title",type:"string",placeholderContent:"Your existing plan and content"},learnMoreText:{id:"learnMoreText",type:"string",placeholderContent:"Learn more"},learnMoreLink:{id:"learnMoreLink",type:"string",placeholderContent:"https://helpx.adobe.com/enterprise/using/individuals-to-teams-plan-upgrade.html"},allTerms:{id:"allTerms",type:Q,isArray:!0,placeholderContent:[{refundCount:"0",terms:[{description:{json:[{nodeType:"paragraph",content:[{nodeType:"text",value:"Your new team subscription starts immediately."}]}]}},{description:{json:[{nodeType:"paragraph",content:[{nodeType:"text",value:"All the content currently in your Adobe cloud storage will be moved and available in your team plan. "}]}]}}]},{terms:[{description:{json:[{nodeType:"paragraph",content:[{nodeType:"text",value:"Your new teams subscription starts immediately, and you\u2019ll receive a "},{nodeType:"text",value:"{refundCount, plural, \n                        =1 {{refund1} refund }\n                        other {{refund1} refund and  {refund2} refund }\n                      }",format:{variants:["bold"]}},{nodeType:"text",value:"in 3-5 business days for your canceled individual {plansCount, plural, =1 {subscription} other {subscriptions}}."}]}]}},{description:{json:[{nodeType:"paragraph",content:[{nodeType:"text",value:"All the content currently in your Adobe cloud storage will be moved and available in your team plan. "}]}]}}]}]},newAllTerms:{id:"newAllTerms",type:Q,isArray:!0,placeholderContent:[{refundCount:"0",terms:[{description:{json:[{nodeType:"paragraph",content:[{nodeType:"text",value:"Your new {commitmentTerm, select, MONTH {monthly} YEAR {yearly} other {}} team subscription starts immediately."}]}]}},{description:{json:[{nodeType:"paragraph",content:[{nodeType:"text",value:"All the content currently in your Adobe cloud storage will be moved and available in your team plan. "}]}]}}]},{terms:[{description:{json:[{nodeType:"paragraph",content:[{nodeType:"text",value:"Your new {commitmentTerm, select, MONTH {monthly} YEAR {yearly} other {}} team subscription starts immediately."}]}]}},{description:{json:[{nodeType:"paragraph",content:[{nodeType:"text",value:"You\u2019ll get a "},{nodeType:"text",value:"{refundCount, plural, \n                        =1 {{refund1} refund }\n                        other {{refund1} refund and  {refund2} refund }\n                      }",format:{variants:["bold"]}},{nodeType:"text",value:"in 3-5 business days for your canceled {plansCount, plural, =1 {{cancellingProductName} subscription} other {individual subscriptions}}."}]}]}},{description:{json:[{nodeType:"paragraph",content:[{nodeType:"text",value:"All the content currently in your Adobe cloud storage will be moved and available in your team plan. "}]}]}}]}]}}),X=n(45800),ee=n(61792),te=n(62482),ne=n(97039),re=n(5764),oe=n(12510),ae=u.createElement;function ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function le(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ie(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ue=(0,j.n)("existingPlanDetails",J)((function(e){var t=e.refundAmount,n=e.existingPlansCount,r=(0,oe.useStore)().getState(),a=(0,(0,re.R_)().getIsI2tWorkflow)(),i=(0,y.x)(),c=(0,k.mT)(r),s=(0,ee.et)(r),d=(0,k.n$)(r),p=(0,u.useState)(""),f=p[0],m=p[1];(0,u.useEffect)((function(){a&&1===n&&function(){var e=(0,l.Z)(o().mark((function e(){var t,n,r,a,l,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,X.FG)(i,c,s.userId,d);case 2:return l=e.sent,u=l.data,e.abrupt("return",null===u||void 0===u||null===(t=u.individualToTeamUpgradeOffers)||void 0===t||null===(n=t.activeOffersResult[0])||void 0===n||null===(r=n.offer)||void 0===r||null===(a=r.offerContent)||void 0===a?void 0:a.productName);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()().then(m)}),[]);var v={existingPlansCount:n,refundAmount:t,onLearnMoreClick:function(e){return(0,te.Yo)(e)}};a&&(v=le(le({},v),{},{cancellingProductName:f,commitmentTerm:ne.RecurrenceTerm.YEAR}));var g=(0,W.useContentEntry)(J);return ae(u.Fragment,null,ae(W.ContentEntryProvider,{value:function(e){return{title:e.get("title"),learnMoreText:e.get("learnMoreText"),learnMoreLink:e.get("learnMoreLink"),allTerms:a?e.get("newAllTerms"):e.get("allTerms")}}(g),model:z.UC},ae(z._x,v)))})),ce=n(298),se=n(28479),de=n(96029),pe=n(98916),fe=n(23239),me=n(94797),ve=n(67348),ye=n(86695),ge=n(57663),Ce=n(76202),Te=n(24531),he=n(59318),Pe=n(7853),be=n(54536),Ee=n(73814),Oe=(0,W.defineContents)("paypaloverlay",{continueButtonLabel:{id:"continueButtonLabel",type:"string",placeholderContent:"Continue (PH)"},cancelButtonLabel:{id:"cancelButtonLabel",type:"string",placeholderContent:"Cancel (PH)"},continueMessage:{id:"continueMessage",type:"string",placeholderContent:"If you've linked your PayPal account, continue now. (PH)"},cancelMessage:{id:"cancelMessage",type:"string",placeholderContent:"Looking to change to a different payment method? Click cancel to proceed. (PH)"}}),_e=n(2385),Se=u.createElement;function Ae(){var e=(0,x.Z)(["\n        fragment PaypalRedirectUrl on Order {\n          status\n          paymentInstrument {\n            ... on PaypalPaymentInstrument {\n              redirectUrl\n            }\n          }\n        }\n      "]);return Ae=function(){return e},e}var Ie,xe=5e3,Ne=2e3,Re=3e5;function De(e,t){return we.apply(this,arguments)}function we(){return(we=(0,l.Z)(o().mark((function e(t,n){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Le(t,n),e.abrupt("return",n.query({query:Pe.A,variables:{token:r},fetchPolicy:"network-only"}).then((function(e){return e.data.paypalTransaction})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Le(e,t){if(!Ie){var n=t.readFragment({id:"Order:".concat(e),fragment:(0,N.Ps)(Ae())}).paymentInstrument.redirectUrl,r=(0,te.rz)(n).token;Ie=r}return Ie}var ke,Ue=(0,j.n)("paypaloverlay",Oe)((function(e){var t=e.show,n=void 0!==t&&t,r=e.orderId,a=e.onPaypalSync,i=e.onCancel,c=(0,W.useContentEntry)(Oe),s=(0,u.useState)(!1),d=s[0],p=s[1],f=(0,y.x)();return(0,u.useEffect)((function(){var e,t=[];function u(){return c.apply(this,arguments)}function c(){return(c=(0,l.Z)(o().mark((function t(){var n,l,c;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,De(r,f);case 2:if(n=t.sent,l=(new Date).getTime(),c=l-e,!(n.status===_e.c0.Unknown&&c<Re)){t.next=12;break}return t.next=8,new Promise((function(e){return d(e,Ne)}));case 8:return t.next=10,u();case 10:t.next=13;break;case 12:n.status===_e.c0.Accepted||n.status===_e.c0.Canceled?n.status===_e.c0.Accepted?a():i():c>=Re&&p(!0);case 13:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function s(){return(s=(0,l.Z)(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new Promise((function(e){return d(e,xe)}));case 2:e=(new Date).getTime(),p(!1),u();case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function d(e,n){t.push(setTimeout(e,n))}n?function(){s.apply(this,arguments)}():(!function(){for(var e=t.pop();e;)clearTimeout(e),e=t.pop()}(),Ie=void 0)}),[n,a,i,f,r]),n&&Se("div",{className:Te.Z.overlay},Se("div",{className:Te.Z.center},d?Se(be.f,{"data-testid":"paypal-overlay-info-icon",className:Te.Z.paypalLogo,size:"L"}):Se(he.default,{"data-testid":"paypal-overlay-wait",size:"M"}),Se(Ee.v,{"data-testid":"paypal-logo",className:Te.Z.paypalLogo,size:"Original"}),Se("p",{className:Te.Z.message},c.get(Oe.continueMessage)),Se("p",{className:Te.Z.messageCancel},c.get(Oe.cancelMessage)),Se("div",{className:Te.Z.actionsContainer},Se(Ce.default,{role:"button",variant:"overBackground",className:Te.Z.actionButton,onClick:i,"data-testid":"paypal-overlay-cancel"},c.get(Oe.cancelButtonLabel)),Se(Ce.default,{role:"button",variant:"overBackground",className:Te.Z.actionButton,onClick:a,"data-testid":"paypal-overlay-continue"},c.get(Oe.continueButtonLabel)))))})),Me=n(13403),je=n(47626),Fe=u.createElement,Ze=n(40705),Be=n(52176),We=n(97872);function Ye(e){return e.code===fe.ir.INVALID_CONCESSION}function qe(){return{type:w.NI.FORM,code:ke.FORM_NON_FATAL_ERROR,extensions:{silent:!0}}}!function(e){e.FORM_NON_FATAL_ERROR="WALLET:FORM_NON_FATAL_ERROR",e.TOKENIZER_SUBMISSION_FAILURE_NON_FATAL_ERROR="WALLET:TOKENIZER_SUBMISSION_FAILURE_NON_FATAL_ERROR",e.TOKENIZER_LOAD_FAILURE_NON_FATAL_ERROR="WALLET:TOKENIZER_LOAD_FAILURE_NON_FATAL_ERROR",e.TOKENIZER_LOAD_SECOND_FAILURE_NON_FATAL_ERROR="WALLET:TOKENIZER_LOAD_SECOND_FAILURE_NON_FATAL_ERROR",e.UNSELECTED_PAYMENT_METHOD_NON_FATAL_ERROR="WALLET:UNSELECTED_PAYMENT_METHOD_NON_FATAL_ERROR"}(ke||(ke={}));var Ge=n(30137),He=n(8703),Ke=n(36015),ze=n(50778),Ve=n(59180),$e=n(2071),Qe=(0,W.defineContents)("PaymentPageContent",{headerAuthUser:{id:"headerAuthUser",type:"string",placeholderContent:"Signed in as"},headerUnauthUser:{id:"headerUnauthUser",type:"string",placeholderContent:"Your new account login"},stepIndicator:{id:"stepIndicator",type:"string"},pageTitle:{id:"pageTitle",type:"string",placeholderContent:"Enter Payment Info \u2014 no charges till trial ends"},pageTitleBuy:{id:"pageTitleBuy",type:"string",placeholderContent:"Enter your payment information."},pageTitleTeamUpgrade:{id:"pageTitleTeamUpgrade",type:"string",placeholderContent:"Review your upgrade and payment info"},pageSubtitleTeamUpgrade:{id:"pageSubtitleTeamUpgrade",type:"string",placeholderContent:"You can also add more products for your team members."},pageTitleAuthUser:{id:"pageTitleAuthUser",type:"string",placeholderContent:"Welcome back {firstName}! Review your payment info."},changeLabel:{id:"changeLabel",type:"string",placeholderContent:"Change"},buttonContinue:{id:"buttonContinue",type:"string",placeholderContent:"Continue"},buttonBack:{id:"buttonBack",type:"string",placeholderContent:"Back"},buttonPlaceOrder:{id:"buttonPlaceOrder",type:"string",placeholderContent:"Place secure order"},buttonStartTrial:{id:"buttonStartTrial",type:"string",placeholderContent:"Start free trial"},buttonAgreeAndSubscribe:{id:"buttonAgreeAndSubscribe",type:"string",placeholderContent:"Agree and subscribe"},buttonGoToPaypal:{id:"buttonGoToPaypal",type:"string",placeholderContent:"Continue with PayPal"},descriptionGoToPaypal:{id:"descriptionGoToPaypal",type:"string",placeholderContent:"Once your PapPal is connected, you'll be brought back here."},descriptionGoToPaypalInApp:{id:"descriptionGoToPaypalInApp",type:V.RichTextContent.JSON,placeholderContent:{json:[{nodeType:"paragraph",content:[{nodeType:"text",value:"You'll be sent to your browser to sign in with PayPal.",format:{variants:["bold"]}},{nodeType:"text",value:" Come back here to complete your purchase."}]}]}},buttonContinueToVerification:{id:"buttonContinueToVerification",type:"string",placeholderContent:"Continue to verification"}}),Je=n(37020),Xe=n(83801),et=n(14793),tt=n(26268),nt=n(6056),rt=n(73113),ot=u.createElement;function at(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function it(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?at(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):at(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var lt=(0,rt.withDialog)(et.SW,{onClick:function(e){var t=e.target;return t.className&&t.className.includes("payment-terms-link")}})((function(e){var t=(0,M.useSelector)(k.E6),n=(0,nt.Q5)().setBillingStateCode,r=e.billingStateCode,o=e.termsOfUseProps;(0,u.useEffect)((function(){n(r)}),[r,n]);var a=(0,y.x)(),i=(0,M.useStore)(),l=(0,M.useSelector)(b.Zw),c=function(t){var n;null===e||void 0===e||null===(n=e.onClick)||void 0===n||n.call(e,{target:t.target,client:a,store:i})},s={data:it(it({},e.data),{},{isTaxInclusive:l}),options:{priceOptions:{styles:{priceFullDisplay:Je.Z.paymentTermsPrice}}}};return ot(u.Fragment,null,ot("div",{role:"button","aria-describedby":"terms-of-use-disclaimer-text",onKeyDown:function(e){et.Ob.includes(e.key)&&c(e)},onClick:c},ot(tt.u,{termsOfUseProps:o,explicitRenewalConfig:t}),ot(Xe.Kd,s)))})),ut=(0,j.n)("subscriptionTerms",Xe.q1)(lt),ct=n(22544),st=n(16359),dt=n(46839),pt=n(57840),ft=n(29680),mt=n(60707),vt=n(42961),yt=n(30488),gt=n(43773),Ct=n(23424),Tt=n(13995),ht=n(97501),Pt=n(5112),bt=n(57876),Et=n(85475),Ot=n(83237),_t=n(62452),St=n(90841),At=n(83005),It=n(55988),xt=n(41196),Nt=n(96909);function Rt(){var e=(0,x.Z)(["\n  fragment CountryTaxSupported on Country {\n    marketSegmentDetails {\n      marketSegmentId\n      taxSupported\n    }\n  }\n"]);return Rt=function(){return e},e}var Dt=(0,N.Ps)(Rt());var wt=n(14157),Lt=function(){var e,t,n,r,a,i,c,s,p=(0,M.useStore)(),f=(0,y.x)(),m=(0,M.useSelector)(k.mT),v=(0,M.useSelector)(ve.wr),C=(0,M.useSelector)(ge.l6),T=(0,M.useSelector)(ve.sy),h=(0,M.useSelector)(ve.AK),P=(0,u.useState)(T),E=P[0],O=P[1],_=(0,u.useState)(h),S=_[0],A=_[1],I=(0,M.useSelector)(ve.ds),x=(0,u.useState)(I),N=x[0],R=x[1],D=(0,u.useState)(v),w=D[0],L=D[1],U=function(e,t){var n,r=e.readFragment({id:"Country:".concat(t),fragment:Dt}).marketSegmentDetails,o=null===r||void 0===r?void 0:r.find((function(e){return e.marketSegmentId===_e.ii.Com}));return null!==(n=null===o||void 0===o?void 0:o.taxSupported)&&void 0!==n&&n}(f,m),j=(0,g.vM)().setError,F=(0,ht.g)(),Z=null!==(e=null===F||void 0===F||null===(t=F.data)||void 0===t||null===(n=t.order)||void 0===n||null===(r=n.billingAddress)||void 0===r?void 0:r.postalCode)&&void 0!==e?e:"",B=null!==(a=null===F||void 0===F||null===(i=F.data)||void 0===i||null===(c=i.order)||void 0===c||null===(s=c.billingContact)||void 0===s?void 0:s.taxId)&&void 0!==a?a:"",W=(0,Ct.g)([d.R.UC_I2T_FAST_FOLLOW_MARCH,d.R.UC_APPLE_PAY,d.R.UC_FLEXIBLE_PROMOTIONS,d.R.UC_FLEXIBLE_PROMOTIONS_OVERRIDE]),Y=(0,wt.k)(),q=(0,M.useSelector)(b.Z6),G=(0,M.useSelector)(b.Ut),H=(0,Et.w)();(0,u.useEffect)((function(){function e(){return(e=(0,l.Z)(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,ct.Yz)({store:p,apolloClient:f,features:W,isChangePlan:Y,logger:H,isTrialConversion:q,teamTrialConversionData:G});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),null!==e.t0&&void 0!==e.t0&&null!==(t=e.t0.extensions)&&void 0!==t&&t.orderCode&&j(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}v&&((!U&&(!S&&"ADD_NEW"===h&&T?T!==E:!!(w&&v&&w===v&&T&&!E&&Z&&T===Z)||T!==E&&T!==Z)||U&&I!==N&&I!==B||"ADD_NEW"===S&&"WALLET"===h||w&&v!==w&&!C)&&function(){e.apply(this,arguments)}(),O(T),R(I),A(h),L(v))}),[f,p,T,v,I,U,C,j,Z,B,w,N,E,S,h,W,Y,H,q,G])},kt=n(52007),Ut=n(21346),Mt=n(6817),jt=n(93633),Ft=n(57972),Zt=n(87835),Bt=n(11367),Wt=n(47578),Yt=n(88882);function qt(){var e=(0,x.Z)(["\n  query GET_WALLET_PROP_DATA($country: ID!, $isAuthenticated: Boolean!) {\n    country(id: $country) {\n      ...paymentCountryInfo\n    }\n    user @include(if: $isAuthenticated) {\n      ...WalletFragment\n    }\n  }\n  ","\n  ","\n"]);return qt=function(){return e},e}function Gt(){var e=(0,x.Z)(["\n  query GET_IMS_COUNTRIES($locale: String!) {\n    imsSupportedCountries(locale: $locale) {\n      countryCode\n      countryName\n    }\n  }\n"]);return Gt=function(){return e},e}var Ht=(0,N.Ps)(Gt()),Kt=(0,N.Ps)(qt(),Wt.q,Yt.a),zt=n(20544),Vt=n(41681),$t=n(77081),Qt=(0,W.defineContents)("PaymentMethod",{paymentMethod:{id:"paymentMethod",type:"string"}}),Jt=(0,W.defineContents)("PaymentMethodsOverride",{initialPaymentFormType:{id:"initialPaymentFormType",type:"string"},removedPaymentFormTypes:{id:"removedPaymentFormTypes",type:"string",isArray:!0},orderedPaymentFormTypes:{id:"orderedPaymentFormTypes",type:Qt,isArray:!0}}),Xt=(0,W.defineContents)("PaymentFormField",{fieldName:{id:"fieldName",type:"string"}}),en=(0,W.defineContents)("PaymentFieldsOverride",{countries:{id:"countries",type:"string",isArray:!0},formType:{id:"formType",type:"string"},displayOrder:{id:"displayOrder",type:Xt,isArray:!0},requiredFields:{id:"requiredFields",type:Xt,isArray:!0}}),tn=(0,W.defineContents)("PaymentFieldOverrideList",{overrides:{id:"overrides",type:en,isArray:!0}}),nn=n(63418),rn=n(89106);function on(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function an(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?on(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):on(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ln="wallet",un="Tokenizer UI Load Failure";function cn(e){return!(null!==e&&void 0!==e&&e.country)}function sn(e,t){var n=(0,rn.G)(),r=(0,a.Z)(n,1)[0],o=(0,xt.$U)(),l=(0,It.t)().currentRoute,c=(0,g.vM)().setError,d=(0,M.useSelector)(ve.s$),p=(0,M.useSelector)(de.vl),f=(0,Et.w)();(0,u.useEffect)((function(){if(d===Ft.WalletConstants.TokenizerConnectionStatus.ERROR)if(e.current.disablePaymentForm(!0),p[s().app.TOKENIZER_LOAD_FAILURE.name])c(function(e,t){return{type:w.NI.NON_FATAL,code:ke.TOKENIZER_LOAD_SECOND_FAILURE_NON_FATAL_ERROR,extensions:{contentVariables:{orderNumber:e,salesPhoneNumber:t}}}}(t,o)),f.error({label:ln,message:"Wallet Tokenizer failed to load more than once"},un);else{var n=(0,i.Z)({},s().app.TOKENIZER_LOAD_FAILURE.name,1),a=an(an({},p),n);r(n,void 0);var u=(0,te.mr)((0,te.Yj)(l),a);c((m=u,{type:w.NI.NON_FATAL,code:ke.TOKENIZER_LOAD_FAILURE_NON_FATAL_ERROR,extensions:{contentVariables:{tryAgainUrl:m}}})),f.error({label:ln,message:"Wallet Tokenizer failed to load once"},un)}var m}),[l,f,t,o,c,r,e,d])}var dn=n(38347),pn=n(28140),fn=n(75467),mn=n(85266),vn=(0,W.defineContents)("switchPaymentCountry",{switchCountryMessageDialog:{id:"switchCountryMessageDialog",type:mn.l,placeholderContent:{title:"This page is about to refresh.",titleHybridWorkflow:"You will be redirected to your web browser.",iconAriaLabel:"Information Dialog",message:{json:[{nodeType:"paragraph",content:[{nodeType:"text",value:"We're about to update this page to show you appropriate payment methods, pricing and country for your selection. Any entered info will be lost."}]}]},confirmLabel:"Change to {newCountryDisplayName}",cancelLabel:"Continue with {currentCountryDisplayName}"}}}),yn=n(66482),gn=u.createElement,Cn=(0,yn.c)("checkout/switchPaymentCountry",vn.__contentType,vn)((function(e){var t=e.country,n=e.countries,r=e.control,o=e.onConfirm,a=e.onClose,i=(0,W.useContentEntry)(vn),l=i.get(vn.switchCountryMessageDialog),c=(0,kt.useTrackEvent)(),s=(0,u.useMemo)((function(){return(null===n||void 0===n?void 0:n.reduce((function(e,t){return e[t.countryCode]=t.countryName,e}),{}))||{}}),[n]),d=r[0];r[2]&&(l.title=l.titleHybridWorkflow);var p={newCountryDisplayName:s[d],currentCountryDisplayName:s[t]};return gn(fn.n,{variant:"confirmation",onClose:function(){var e=(0,ce.W6)("".concat(K.ps.COUNTRY_CHANGE,":").concat(K.ps.CONTINUE_LINK,":").concat(K.ps.CLICK),K.ps.CONTINUE_LINK);c(e),a()},onConfirm:function(){var e=(0,ce.W6)("".concat(K.ps.CHANGE_COUNTRY,":").concat(K.ps.CLICK),K.ps.CHANGE_COUNTRY);c(e),o.apply(void 0,(0,pn.Z)(r))},content:mn.l.createEntry(l,i.locale),variables:p})})),Tn=n(47995),hn=u.createElement,Pn=u.createElement;function bn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function En(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bn(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var On=(0,j.n)("walletContentTypes",Ft.ContentModel.WalletContentTypes)((function(e){var t,n,r,o,a,l,c,p,f,m=e.walletRef,v=e.submitCallback,C=e.onChangePayPalAccountCallback,T=e.orderData,h=e.isPaypalReturn,P=(0,W.useContentEntry)(Jt,!0),E=(0,W.useContentEntry)(tn,!0),O=(0,oe.useStore)(),_=(0,oe.useSelector)(k.wJ),A=(0,oe.useSelector)($t.Gg).clientSessionId,I=(0,oe.useSelector)(ee.et).email,x=(0,oe.useSelector)(k.mT),N=(0,oe.useSelector)(k.Im),R=(0,oe.useSelector)(de.vl),D=(0,oe.useSelector)(ee.PQ),w=(0,oe.useSelector)(ee.hP),L=(0,oe.useSelector)(ee.OQ),M=(0,oe.useSelector)(k.v7),j=(0,oe.useSelector)(k.eE),F=(0,oe.useSelector)(ve.UN),Z=(0,oe.useSelector)(ve.AK),B=(0,oe.useSelector)(ve.UX),q=R[s().app.CTX.name],G=(0,Vt.$M)(q),H=(0,_t.KW)(),z=(0,y.x)(),V=(0,oe.useSelector)(b.Jm),$=(t={},(0,i.Z)(t,_e.op.Individual,Ft.WalletConstants.CustomerSegment.INDIVIDUAL),(0,i.Z)(t,_e.op.Team,Ft.WalletConstants.CustomerSegment.TEAMS),t),Q=z.readFragment({id:"PersonalizedOffer:".concat(Ve.xb.COMMITMENT_VARIANTS,":").concat(V),fragment:se.lP}).offer,J=null===Q||void 0===Q?void 0:Q.customerSegment,X=(0,g.jK)(),te=(0,Ct.g)([d.R.UC_WALLET_ACCORDION]),ne=(0,Nt.W)(),re=ne.showApplePay,ae=ne.showGooglePay,ie=(0,nn.l)(),le=(0,oe.useSelector)(ve.Po);(0,U.pS)(le,qe),sn(m,null===T||void 0===T?void 0:T.orderNumber);var ue=(0,jt.a)(Ht,{ssr:!1,variables:{locale:N}}).data,pe=[{countryCode:x,countryName:x}],fe=D?{headers:{Authorization:w}}:{},ye=(0,jt.a)(Kt,{variables:{country:x,isAuthenticated:D},context:En({},fe)}),ge=ye.data,Ce=ye.loading,Te=ye.error,he=ye.updateQuery,Pe=ye.refetch,be=ye.previousData;Ce&&(ge=be);var Ee=function(e,t,n,r){var o=(0,g.vM)().setError;return(0,u.useEffect)((function(){e&&cn(t)&&o((0,me.cs)())}),[r,o,n,t,e]),cn(t)}(Te,ge,he,Pe),Oe=h?Ft.WalletConstants.PaymentFormType.PAYPAL:B,Se=null===T||void 0===T?void 0:T.paymentInstrument,Ae=null!==(n=null===Se||void 0===Se?void 0:Se.paypalEmail)&&void 0!==n?n:void 0,Ie=F||{},xe=En(En({},Ie),{},{payerId:h?Ae:void 0}),Ne=null===T||void 0===T||null===(r=T.billingContact)||void 0===r?void 0:r.primaryPhone,Re=Ie.phoneNumber,De=Ne&&h&&!Re?Ne:void 0;De&&(xe.phoneNumber=De);var we,Le=null===T||void 0===T||null===(o=T.billingContact)||void 0===o?void 0:o.taxId,ke=(0,oe.useSelector)(ee.FD),Ue=(0,oe.useSelector)(ve.ds),Me=null===T||void 0===T?void 0:T.statusHint,je=function(e,t,n,r,o){var a=!1;if(e&&!n)return(o&&!r||r&&t===Be.k.TAX_ID_CORRECTED&&e!==r)&&(a=!0),a};ke?we=ke:je(Le,Me,ke,Ue,h)&&(we=Le),we&&(xe.taxId=we);var Fe=(0,u.useState)(!!ke),We=Fe[0],Ge=Fe[1],He="ADD_NEW"===Z||h,Ke=(0,u.useCallback)((function(){var e;null===m||void 0===m||null===(e=m.current)||void 0===e||e.reloadWalletFormProps()}),[m]),ze=(0,u.useRef)(ke);(0,u.useEffect)((function(){ke&&ke!==ze.current&&(Ge(!0),Ke(),ze.current=ke)}),[Ke,ke]),(0,u.useEffect)((function(){je(Le,Me,ke,Ue,h)&&Ke()}),[h,Le,Ke,Me,ke,Ue]),(0,u.useEffect)((function(){ie&&Ke()}),[ie,Ke]);var $e=(0,u.useRef)(B),Qe=(0,g.vM)().dismissError;(0,u.useEffect)((function(){B&&B!==$e.current&&($e.current=B,X&&X.type!==Bt.N.FATAL&&!Ye(X)&&Qe())}),[B,X,Qe]);var Je=(0,u.useRef)(ae),Xe=(0,u.useRef)(re);(0,u.useEffect)((function(){ae===Je.current&&re===Xe.current||(Je.current=ae,Xe.current=re,Ke())}),[re,Xe,ae,Je,Ke]);var et=(0,u.useRef)(h);(0,u.useEffect)((function(){h!==et.current&&(Ke(),et.current=h)}),[h,Ke]);var tt=(0,u.useRef)(Ae);(0,u.useEffect)((function(){Ae!==tt.current&&(Ke(),tt.current=Ae)}),[Ae,Ke]);var nt=null===T||void 0===T?void 0:T.paymentInstrument,rt=null===nt||void 0===nt?void 0:nt.mandateId,ot=(0,u.useRef)(rt);(0,u.useEffect)((function(){rt&&!ot.current?ot.current=rt:rt&&ot.current&&rt!==ot.current&&(Ke(),ot.current=rt)}),[rt,Ke]);var at=(0,u.useRef)(L);(0,u.useEffect)((function(){L!==at.current&&(Ke(),at.current=L)}),[L,Ke]);var it=(0,u.useRef)(ue);(0,u.useEffect)((function(){ue&&ue!==it.current&&(Ke(),it.current=ue)}),[ue,Ke]);var lt,ut=(0,yt.useCommerceAppContext)().isInApp,ct=ie,st=[];(re||st.push(Y.DigitalPaymentsTypes.APPLE_PAY),ae||st.push(Y.DigitalPaymentsTypes.GOOGLE_PAY),st.length)&&(ct=null===(lt=ct)||void 0===lt?void 0:lt.map((function(e){var t,n=e.allowedDigitalWallets;return n=null===(t=n)||void 0===t?void 0:t.filter((function(e){return!st.includes(e)})),En(En({},e),{},{allowedDigitalWallets:n})})));var dt=function(){var e,t,n=P.get(Jt.initialPaymentFormType),r=P.get(Jt.removedPaymentFormTypes),o=null===(e=P.get(Jt.orderedPaymentFormTypes))||void 0===e?void 0:e.map((function(e){return e.paymentMethod}));return(n||r||null!==o&&void 0!==o&&o.length)&&(t={initialPaymentFormType:n,removedPaymentFormTypes:r,orderedPaymentFormTypes:o}),t},pt=function(){var e=E.get("overrides"),t=null===e||void 0===e?void 0:e.find((function(e){return e.countries.includes(x)&&e.formType===Oe}));if(t){var n=t.countries,r=t.formType,o=t.displayOrder,a=t.requiredFields;return{countries:n,formType:r,displayOrder:ft(o),requiredFields:ft(a)}}},ft=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((function(e){return e.fieldName}))},mt=(0,u.useMemo)((function(){return{paymentMethods:dt(),paymentFormFields:pt()}}),[Oe]);(0,u.useEffect)((function(){return Ke()}),[mt.paymentFormFields]);var vt={showAccordionSelector:(0,Ze.Pl)(O.getState(),te),disableTaxId:We,formFieldData:xe,formType:Oe,mandateId:rt,preserveAddNewFormData:He,googlePlacesApiKey:(0,zt.D)()===Zt.T.PRODUCTION?"AIzaSyDMpsaQdxiJnnvp8aLJLi8p11P1LgP2O74":"AIzaSyBi19j61Ro4o2Yb-PVsdKWocpFbccfznAM",submitCallback:v,onChangePayPalAccountCallback:C,config:{userEmail:I,clientSessionId:A,typekitId:_,tokenizer:{clientId:G,tokenizerConnectionTimeout:31e3,currency:null===Q||void 0===Q||null===(a=Q.currency)||void 0===a?void 0:a.code}},country:Ft.WalletConstants.SupportedCountry[x],customerSegment:$[J],dataSources:{walletData:null!==(l=null===(c=ge)||void 0===c||null===(p=c.user)||void 0===p?void 0:p.wallet)&&void 0!==l?l:{},validPaymentsData:ct,countryData:null===(f=ge)||void 0===f?void 0:f.country,imsCountriesListData:((null===ue||void 0===ue?void 0:ue.imsSupportedCountries)||pe).filter((function(e){return e.countryCode===x||!(null!==j&&void 0!==j?j:[]).includes(e.countryCode)}))},displayWalletFieldsForm:!0,hideSensitiveInformation:!!ut(),marketSegment:Ft.WalletConstants.MarketSegment.COM,lockCountry:!L,maxPaymentSelectorOptions:3,showNewForm:M,override:mt},gt=function(e){var t=e.country,n=e.countries,r=e.ref,o=(0,u.useContext)(W.ContentContext).locale,a=(0,Et.w)(),i=(0,u.useMemo)((function(){return{variables:{locale:"zh-hant"===o?"zh_TW":o},options:{fetchOptions:{logger:a}},usePlaceholderContent:!0}}),[o,a]);return(0,u.useMemo)((function(){return(0,Tn.withDialog)((function(e){var r=e.control,o=e.onClose,a=e.onConfirm;return hn("div",{"data-testid":"switch-payment-country-dialog"},hn(Cn,{aem:i,control:r,onClose:o,onConfirm:a,country:t,countries:n}))}),{onCountryFieldChange:!0},!0)((function(e){var t=e.onCountryFieldChange,n=(0,dn.Z)(e,["onCountryFieldChange"]),o=(0,kt.useTrackEvent)();return hn(Ft.StoreWallet,(0,S.Z)({ref:r,interceptors:{onCountryFieldChange:function(e,n){var r=(0,ce.W6)("".concat(K.ps.COUNTRY_CHANGE,":").concat(K.ps.MODAL),"".concat(K.ps.COUNTRY_CHANGE).concat(K.ps.MODAL));o(r),t(e,n,!1)}}},n))}))}),[r,i,t,n])}({country:x,countries:null===ue||void 0===ue?void 0:ue.imsSupportedCountries,ref:m}),Tt=(0,wt.k)();return!ge||Ee||Tt&&!ct?Pn(u.Fragment,null):Pn("div",{"data-testid":"wallet-container",className:Mt.Z.walletContainer},Pn(gt,(0,S.Z)({storeSliceName:ve.x5},vt,{onCountryFieldChange:function(e,t){t(e),H(e)}})))})),_n=(0,j.n)("paymentMethodsOverride",Jt)((function(){return null})).queryCollection,Sn=(0,j.n)("paymentFieldOverrideList",tn)((function(){return null})).queryCollection;On.queryCollection.merge(_n),On.queryCollection.merge(Sn);var An=n(60718),In=u.createElement,xn=(0,j.n)("paymentPage",Qe)((function(){var e,t,n,r,a=(0,It.t)().currentRoute,i=(0,kt.useTrackEvent)(),c=(0,u.useRef)(),p=(0,u.useRef)(),S=(0,Et.w)(),A=(0,Ct.g)([d.R.P_UC_PSD2_FAKE_403_FOR_NON_3DS_ORDER,d.R.UC_APPLE_PAY,d.R.UC_GOOGLE_PAY,d.R.P_UC_GOOGLE_PAY_PSD2_ENROLLMENT_FAILURE,d.R.P_UC_GOOGLE_PAY_PSD2_ENROLLMENT_SUCCESS,d.R.P_UC_GOOGLE_PAY_PSD2_VALIDATION_FAILURE,d.R.P_UC_GOOGLE_PAY_PSD2_VALIDATION_SUCCESS,d.R.UC_FLEXIBLE_PROMOTIONS,d.R.UC_FLEXIBLE_PROMOTIONS_OVERRIDE,d.R.UC_I2T_FAST_FOLLOW_MARCH,d.R.UC_NEW_SYSTEM_CLOSE,d.R.UC_FORCE_PAYMENT_CTA_OPTIMIZATION,d.R.UC_SHOW_JARVIS_CHAT,d.R.UC_TRIAL_ABUSE]),I=(0,re.R_)(),x=I.hasPreviousStep,N=I.goToPreviousStepWithUpdatedItems,R=I.goToNextStepWithUpdatedItems,D=I.getIsAcademicWorkflow,L=I.getIsI2tWorkflow,j=I.setLoading,F=(0,H.SX)().getDynamicContextId,z=(0,M.useSelector)(b.RL),V=(0,M.useSelector)(k.n$),$=(0,M.useStore)(),Q=$.getState(),J=(0,M.useDispatch)(),X=(0,y.x)(),te=(0,W.useContentEntry)(Qe),oe=(0,M.useSelector)(b.Jm),ae=(0,M.useSelector)(b.f7),ie=(0,M.useSelector)(b.OS),le=(0,M.useSelector)(b.qr),Ce=(0,M.useSelector)(ve.SA),Te=(0,M.useSelector)(ve.s$),he=(0,M.useSelector)(k.dm).learnMoreUrl,Pe=(0,M.useSelector)(k.mT),be=(0,M.useSelector)(ee.PQ),Ee=(0,M.useSelector)(ee.et),Oe=Ee.firstName,Se=void 0===Oe?"":Oe,Ae=Ee.lastName,Ie=void 0===Ae?"":Ae,xe=be?te.get(Qe.headerAuthUser):te.get(Qe.headerUnauthUser),Ne=(0,M.useSelector)(b.Zw),Re=(0,_t.sY)(),De=(0,_t.r9)(),we=(0,de.vl)(Q),qe=(0,_t.eR)(),Je=(0,yt.useCommerceAppContext)(),Xe=Je.isInApp,et=Je.isInIframe,tt=(0,k.eX)($.getState()),nt=(0,Nt.W)(),rt=nt.showApplePay,ot=nt.showGooglePay,at=(0,Ze.HI)(Q,A),it=(0,M.useSelector)(de.El)?"".concat(f.Z.separator," ").concat(f.Z.separatorReader):f.Z.separator,lt=(0,M.useSelector)(de.By)===s().app.LAYOUT.values.SLIM,Rt=X.readFragment({id:"PersonalizedOffer:".concat(Ve.xb.COMMITMENT_VARIANTS,":").concat(oe),fragment:se.lP}).offer,Dt=(0,g.vM)(),wt=Dt.setError,Mt=Dt.dismissError,jt=(0,U.uk)(),Zt=jt.setError,Bt=jt.dismissError,Wt=(0,g.jK)(),Yt=(0,ht.g)().data,qt=(0,Tt.z)().getBaseOffers,Gt=(0,Tt.K)().swapTrialWithBaseOffers,Ht=null===Yt||void 0===Yt?void 0:Yt.order,Kt=null===Ht||void 0===Ht?void 0:Ht.statusHint,zt=(0,M.useSelector)(ve.Qd),Vt=(0,u.useState)(!1),$t=Vt[0],Qt=Vt[1],Jt=(0,u.useState)(!1),Xt=Jt[0],en=Jt[1],tn=(0,u.useState)(!1),nn=tn[0],rn=tn[1],on=(0,u.useState)(!1),an=on[0],ln=on[1],un=(0,u.useState)(!1),cn=un[0],sn=un[1],dn=(0,U.$F)()||at&&(null===Wt||void 0===Wt?void 0:Wt.code)===ke.UNSELECTED_PAYMENT_METHOD_NON_FATAL_ERROR,pn=D(),fn=L(),mn=(0,M.useSelector)(b.Z6),vn=(0,M.useSelector)(b.Ut),yn=(0,ve.ai)($.getState()),gn=(0,M.useSelector)(ge.l6),Cn=(0,St.O)().isPaypalRedirectRequired,Tn=(0,Ot.a)().invalidatePaypal,hn=(0,M.useSelector)(ve.Ve),Pn=(0,M.useSelector)(ve.e7),bn=(0,M.useSelector)(b.IG),En=(bn===He.v.TEAM||bn===He.v.TEAM_EDU)&&!gn,_n=(0,M.useSelector)(b.Z6),Sn=(0,M.useSelector)(b.pL);_n||(Sn=null);var xn=bn===He.v.TEAM_EDU?Ke.MarketSegment.EDU:Ke.MarketSegment.COM,Nn=(0,E.rR)(),Rn=(0,M.useSelector)(ye.A),Dn=(0,M.useSelector)(b.NO),wn=(0,u.useState)(void 0),Ln=wn[0],kn=wn[1],Un=(0,Ut.z)(),Mn=(0,h.VB)(h.yr),jn=fn&&function(e,t){var n=(e||{}).refunds;return n?n.map((function(e){var n=e.currency,r=e.priceWithTax,o=e.usePrecision,a=Number(r),i={data:{price:a,formatString:(null===n||void 0===n?void 0:n.formatString)||t},options:{usePrecision:o,styles:je.Z}},l=Fe(ne.InlinePrice,i);return a?l:void 0})).filter((function(e){return null!=e})):null}(Ht,null===Rt||void 0===Rt||null===(e=Rt.currency)||void 0===e?void 0:e.formatString),Fn=fn&&(null===(t=we[s().app.CURRENT_SUBSCRIPTION_IDS.name])||void 0===t?void 0:t.length),Zn=(0,ft.l)(),Bn=Zn.showBanner,Wn=Zn.setShowBanner,Yn=(0,bt._)(),qn=Yn.setIsJarvisChatEnabled,Gn=Yn.setChatMode;(0,u.useEffect)((function(){A[d.R.UC_SHOW_JARVIS_CHAT]&&(qn(!0),Gn(""))}),[]);var Hn=(0,vt.jD)((0,M.useSelector)(b.V4)),Kn=(0,M.useSelector)(b.Kq),zn=(0,u.useCallback)((function(){var e;Mn&&(null===(e=window)||void 0===e||e.scrollTo({top:50,behavior:"smooth"}))}),[Mn]),Vn=(0,u.useRef)(),$n=(0,Ct.g)([d.R.UC_TRIAL_ABUSE])[d.R.UC_TRIAL_ABUSE];(0,u.useEffect)((function(){null!==hn&&void 0!==hn&&hn.formType&&(!gn||!Pn&&yn||Tn({updateQueryParamsInUrl:!0}))}),[Tn,yn,gn,Pn,hn]);var Qn=function(e){var t,n;return(null===e||void 0===e||null===(t=e.extensions)||void 0===t?void 0:t.orderCode)===Be.k.PAYPAL_COUNTRY_MISMATCH||(null===e||void 0===e||null===(n=e.extensions)||void 0===n?void 0:n.orderCode)===Be.k.PAYPAL_SERVICE_ERROR},Jn=!!(0,g.jK)(Qn);Lt();var Xn=function(e){var t,n=e.extensions;null===(t=c.current)||void 0===t||t.setFieldErrors(function(e){switch(e){case Be.k.ORDER_AUTH_INVALID_IBAN:return We.WalletErrorCode.BANK_ACCOUNT_ERROR;case Be.k.TAX_INVALID_ADDRESS:return We.WalletErrorCode.ADDRESS_ERROR;case Be.k.TAX_ID_INVALID:return We.WalletErrorCode.TAX_ID_ERROR;case Be.k.UNSUPPORTED_PAYMENT_TYPE:return We.WalletErrorCode.CREDIT_CARD_NUMBER_ERROR;default:return We.WalletErrorCode.PAYMENT_FAILURE}}(n.orderCode))},er=null===Ht||void 0===Ht||null===(n=Ht.paymentInstrument)||void 0===n?void 0:n.paypalEmail;(0,u.useEffect)((function(){return gn&&!er?J((0,ge.sH)(!0)):(!gn||gn&&er)&&J((0,ge.sH)(!1)),function(){J((0,ge.sH)(!1))}}),[J,gn,er]),(0,u.useEffect)((function(){var e,t,n;null!==Wt&&void 0!==Wt&&null!==(e=Wt.extensions)&&void 0!==e&&e.orderCode&&!Ye(Wt)&&Xn(Wt);var r=null===(t=c.current)||void 0===t?void 0:t.setFieldErrors;return null===(n=window)||void 0===n||n.addEventListener("popstate",(function(){r&&r(Ft.WalletConstants.WalletErrorCode.EMPTY_FIELDS_ERROR)})),function(){var e;null===(e=window)||void 0===e||e.removeEventListener("popstate",(function(){r(Ft.WalletConstants.WalletErrorCode.EMPTY_FIELDS_ERROR)}))}}),[]);var tr=(0,u.useCallback)((function(e){wt(e),j(!1),zn()}),[zn,wt,j]),nr=(0,u.useCallback)((function(e){tr(e)}),[tr]),rr=(0,u.useCallback)((function(){j(!1)}),[j]),or=(0,u.useCallback)(function(){var e=(0,l.Z)(o().mark((function e(t){var n,r,a,i,l,u,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.success,r=t.failure,a=Kn===_.e.DOCUMENT?H.Np.SET_PASSWORD_DC:H.Np.SET_PASSWORD_CC,e.next=4,F({items:z,locale:V,variant:a});case 4:return i=e.sent,l={dynamicContextId:i},e.next=8,(0,E.oN)({apolloClient:X,country:Pe,logger:S,store:$});case 8:return e.prev=8,e.next=11,(0,ct.Yz)({store:$,apolloClient:X,cartIdentityInput:l,isPlaceOrder:!0,isChangePlan:fn,logger:S,features:A,isTrialConversion:mn,teamTrialConversionData:vn});case 11:n(),R(),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(8),(null===(u=(0,E.TW)(X,Dn))||void 0===u?void 0:u.status)===_e.iF.PendingAuthentication?(n(),kn(null===Rn||void 0===Rn?void 0:Rn.transactionId),(0,E.g4)(u,Nn,ae,S)):(null!==e.t0&&void 0!==e.t0&&null!==(c=e.t0.extensions)&&void 0!==c&&c.orderCode&&tr(e.t0),r());case 19:case"end":return e.stop()}}),e,null,[[8,15]])})));return function(t){return e.apply(this,arguments)}}(),[X,Kn,Pe,z,A,F,R,tr,fn,mn,V,S,Dn,null===Rn||void 0===Rn?void 0:Rn.transactionId,Nn,$,vn,ae]),ar=(0,u.useCallback)(function(){var e=(0,l.Z)(o().mark((function e(t){var n,r,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=$.getState(),j(!0),r=Kn===_.e.DOCUMENT?H.Np.SET_PASSWORD_DC:H.Np.SET_PASSWORD_CC,e.next=5,F({items:z,locale:V,variant:r});case 5:return a=e.sent,e.prev=6,e.next=9,(0,ct.Yz)({store:$,apolloClient:X,cartIdentityInput:{dynamicContextId:a},features:A,isPlaceOrder:!0,logger:S,isChangePlan:fn,state:n,isTrialConversion:mn,teamTrialConversionData:vn});case 9:R(),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(6),t(e.t0);case 15:case"end":return e.stop()}}),e,null,[[6,12]])})));return function(t){return e.apply(this,arguments)}}(),[X,Kn,z,F,R,V,S,$]);function ir(){var e,t=$.getState(),n=(0,ve.l)(t),r=(0,ve.DR)(t);if(n&&!pn)null===(e=Vn.current)||void 0===e||e.initDigitalPayment({paymentType:Y.DigitalPaymentsTypes.APPLE_PAY});else if(r&&!pn){var o;null===(o=Vn.current)||void 0===o||o.initDigitalPayment({paymentType:Y.DigitalPaymentsTypes.GOOGLE_PAY})}c.current.submitForm()}function lr(){En?p.current.submitForm():ir()}function ur(){return(ur=(0,l.Z)(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,ce.W6)("".concat(K.Fp.PAGE_PAYMENT,":").concat(K.ps.BACK,":").concat(K.ps.CLICK),K.ps.BACK),i(t),e.next=4,Tn();case 4:c.current.setFieldErrors(Ft.WalletConstants.WalletErrorCode.EMPTY_FIELDS_ERROR),N();case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cr(){return(cr=(0,l.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Tn({updateOrder:!1});case 2:lr();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function sr(){return(sr=(0,l.Z)(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.onClose,en(!0),e.next=4,Tn({forceInvalidation:!0,updateOrder:!0,updateQueryParamsInUrl:!0});case 4:n();case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function dr(){return(dr=(0,l.Z)(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.onClose,en(!0),e.next=4,Tn({updateOrder:!1,updateQueryParamsInUrl:!0});case 4:n(),lr();case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pr(){return(pr=(0,l.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,ct.Yz)({store:$,apolloClient:X,features:A,isPaypalInit:!0,isChangePlan:fn,logger:S,isTrialConversion:mn,teamTrialConversionData:vn});case 3:j(!Xe()),ln(Xe()),Re(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),tr(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}(0,u.useEffect)((function(){Xt&&(Mt(),en(!1))}),[Mt,Xt]),(0,u.useEffect)((function(){var e=gn&&Kt&&Kt!==Be.k.INVALID_CONCESSION;!Jn&&e&&tr((0,fe.mA)(Kt,$))}),[tr,Jn,gn,Kt,$]),(0,u.useEffect)((function(){if(!gn&&Kt&&Kt===Be.k.INVALID_CONCESSION){var e=!!we[s().app.APPLIED_PROMOTION_CODE.name],t=(0,fe.N2)($,Be.k.INVALID_CONCESSION,A);e&&wt(t)}}),[gn,Kt]),(0,u.useEffect)((function(){!1===(null===Ce||void 0===Ce?void 0:Ce.status)&&nn&&(wt(function(e){return{type:w.NI.NON_FATAL,code:ke.TOKENIZER_SUBMISSION_FAILURE_NON_FATAL_ERROR,extensions:{contentVariables:{learnMoreUrl:e}}}}(he)),c.current.setFieldErrors(Ft.WalletConstants.WalletErrorCode.PAYMENT_FAILURE),zn())}),[zn,Ce,nn,he]),(0,u.useEffect)((function(){dn&&(nn&&zn(),rn(!1))}),[dn,nn,zn]),(0,u.useEffect)((function(){var e=$.getState();function t(){return(t=(0,l.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,E.oN)({apolloClient:X,country:Pe,logger:S,store:$,storeState:t});case 2:ar((function(e){var t,n=null===e||void 0===e||null===(t=e.extensions)||void 0===t?void 0:t.orderCode,r=(0,E.TW)(X,Dn);(null===r||void 0===r?void 0:r.status)===_e.iF.PendingAuthentication?(kn(null===Rn||void 0===Rn?void 0:Rn.transactionId),(0,E.g4)(r,Nn,ae,S)):(tr(e),$n?Xn(e):De(n)?sn(!0):Xn(e))}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}if((0,ve.Qd)(e)&&$t){Mt(),Qt(!1);var n,r=!pn;if(((0,ve.l)(e)||(0,ve.DR)(e))&&r)null===(n=Vn.current)||void 0===n||n.beginDigitalPayment();else r?function(e){t.apply(this,arguments)}(e):R()}!1===(null===Ce||void 0===Ce?void 0:Ce.status)&&$t&&(Qt(!1),j(!1))}),[X,Pe,Mt,z,A,F,R,tr,pn,V,S,Dn,null===Rn||void 0===Rn?void 0:Rn.transactionId,Nn,De,$,j,$t,Ce,ae,zt,fn,ar,$n,null===Rt||void 0===Rt||null===(r=Rt.productArrangement)||void 0===r?void 0:r.code,null===Rt||void 0===Rt?void 0:Rt.id,Hn]),(0,u.useEffect)((function(){null!==Rn&&void 0!==Rn&&Rn.transactionId&&void 0!==Ln&&Ln!==(null===Rn||void 0===Rn?void 0:Rn.transactionId)&&ar((function(e){tr(e)}))}),[Ln,tr,ar,null===Rn||void 0===Rn?void 0:Rn.transactionId,j]);var fr=!fn&&(!Xe()&&!et()||et()&&lt||Xe()&&tt&&!be),mr=function(){if(Xe()){var e=te.get(Qe.descriptionGoToPaypalInApp);return In(B.d,{dataTestId:"in-app-paypal-cta-desc",json:e.json})}var t=te.get(Qe.descriptionGoToPaypal);return In(u.Fragment,null,t)},vr=function(){return Cn?te.get(Qe.buttonGoToPaypal):pn?te.get(Qe.buttonContinueToVerification):ae&&!v.y.includes(Pe)?te.get(Qe.buttonStartTrial):le?te.get(Qe.buttonPlaceOrder):te.get(Qe.buttonAgreeAndSubscribe)},yr=(0,Pt.B)(vr);(0,u.useEffect)((function(){var e=(0,ce.lG)(Rt,!0),t=(0,ce.Nf)(Rt,e,Q,K.RC.EVENT_STATE_TYPE,void 0,a,rt,ot);Un(t)}),[Rt]);var gr=(0,gt.T)();(0,u.useEffect)((function(){gr(G.P.PAGE_LOAD),S.info("Payment Page mounted successfully")}),[]);var Cr=In(u.Fragment,null,function(){if(Cn)return In("div",{className:f.Z.ctaDescription,"data-testid":"terms-of-use-container"},mr());if(fn){var e,t,n,r,o,a;if(!Ht||!Rt)return null;var i={price:{price:Ne?null===(e=Ht.cartPrice)||void 0===e?void 0:e.totalWithTax:null===(t=Ht.cartPrice)||void 0===t?void 0:t.totalWithoutTax,formatString:null===(n=Rt.currency)||void 0===n?void 0:n.formatString,usePrecision:null===(r=Rt.currency)||void 0===r?void 0:r.precision},cancelDate:(0,pe.Sd)(null,null===(o=Rt.cancellationTerm)||void 0===o?void 0:o.termRule),country:Pe,term:Rt.term},l=null===Ht||void 0===Ht||null===(a=Ht.billingAddress)||void 0===a?void 0:a.stateCode;return In("div",{className:f.Z.paymentTermsContainer},In(ut,{billingStateCode:l,data:i,termsOfUseProps:yr}))}return pn||le?void 0:In(mt.N,yr)}(),In(m.s,{backLabel:te.get(Qe.buttonBack),ctaLabel:vr(),disableCtaButton:dn||Te===Ft.WalletConstants.TokenizerConnectionStatus.ERROR||!at&&void 0===(null===hn||void 0===hn?void 0:hn.formType),onBackClick:function(){return ur.apply(this,arguments)},onCtaClick:function(){if(!at||null!==hn&&void 0!==hn&&hn.formType){var e,t;ie?(e=K.ps.VERIFICATION,t="".concat(K.Fp.PAGE_PAYMENT,":").concat(K.ps.VERIFICATION,":").concat(K.ps.CLICK)):ae?(e=K.ps.START_TRIAL,t="".concat(K.Fp.PAGE_PAYMENT,":").concat(K.ps.START_TRIAL,":").concat(K.ps.CLICK)):(e=K.ps.SUBSCRIBE,t="".concat(K.Fp.PAGE_PAYMENT,":").concat(K.ps.SUBSCRIBE,":").concat(K.ps.CLICK));var n=(0,ce.W6)(t,e);i(n),rn(!0),(0,b.Wt)(!1),lr()}else wt({type:w.NI.NON_FATAL,code:ke.UNSELECTED_PAYMENT_METHOD_NON_FATAL_ERROR})},showBackButton:x()})),Tr={salesPhoneNumber:(0,xt.$U)()};function hr(){Wn(!1);var e=(0,b.fq)($.getState());(0,st.yU)(Hn,e,ze.K),Bt((0,me.x5)())}var Pr={licenseInvalidCallback:fn?function(){Wn(!0),Zt((0,me.x5)())}:null,licenseInvalidMaxValue:ze.K},br=Bn?In((function(){return In(ft.V,{onClose:hr,ctaClicked:function(){return qn(!0)},contentVariables:Tr})}),null):null;return(0,u.useEffect)((function(){at&&null!==hn&&void 0!==hn&&hn.formType&&dn&&Mt()}),[at,null===hn||void 0===hn?void 0:hn.formType,dn,Mt]),(0,u.useEffect)((function(){function e(){return(e=(0,l.Z)(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qt();case 2:t=e.sent,Gt(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Kt===Be.k.TRIAL_INELIGIBLE&&$n&&function(){e.apply(this,arguments)}()}),[Kt,$n,qt,Gt]),In(u.Fragment,null,In(C.J,{onPrimaryCtaClicked:function(e){yn&&function(e){sr.apply(this,arguments)}(e)},onSecondaryCtaClicked:function(e){yn&&function(e){dr.apply(this,arguments)}(e)},displayErrorFilter:function(e){return Qn(e)}}),Xe()&&cn?In(Ge.b,{workflow:He.q.TRIAL_ABUSE}):In(An.Ru,{header:br},In(An.uN,null,In(T.qv,{logMeta:{componentName:"Payment",errorLoadingComponent:"StepIndicator"}},In(pt.O,null)),In(T.qv,{logMeta:{componentName:"Payment",errorLoadingComponent:"StepHeader"}},In(dt.l,{title:fn?te.format(Qe.pageTitleTeamUpgrade):be?Xe()||et()?ae?te.get(Qe.pageTitle):te.get(Qe.pageTitleBuy):te.format(Qe.pageTitleAuthUser,{firstName:Se,lastName:Ie}):ae?te.get(Qe.pageTitle):te.get(Qe.pageTitleBuy),subtitle:function(){if(fn)return te.get(Qe.pageSubtitleTeamUpgrade)}()})),In(An.hg,null,!at&&fr&&In("div",null,In(At.n,{title:xe,change:te.get(Qe.changeLabel),showChangeLink:!(et()&&lt)}),In("div",{className:it})),En&&In("div",{className:f.Z.companyInfoContainer},In(Z,{companyInfoRef:p,companyName:Sn,disableCompanyName:_n,marketSegment:xn,submitCallback:function(){A[d.R.UC_I2T_FAST_FOLLOW_MARCH]?ir():c.current.submitForm()}})),In("div",null,In(On,{walletRef:c,submitCallback:function(){Cn?function(){pr.apply(this,arguments)}():Qt(!0)},onChangePayPalAccountCallback:function(){return cr.apply(this,arguments)},orderData:Ht,isPaypalReturn:gn})),fn&&jn&&In("div",{className:f.Z.paymentExistingPlanDetails},In(ue,{existingPlansCount:Fn,refundAmount:jn})),!Mn&&Cr)),In(An.Wh,{sticky:!0},at&&fr&&In(At.n,{title:xe,change:te.get(Qe.changeLabel),showChangeLink:!(et()&&lt),isInDetailPanel:!0}),In(P.A,{licenseInvalidOption:Pr}),In(O.J,{offer:Rt})),Mn&&In("div",{className:f.Z.ctaContainer},Cr)),In($e.l,{paymentAuthRef:Nn}),(rt||ot)&&!pn&&In(q.w,{onCancel:rr,onSubmit:or,onError:nr,ref:Vn}),Xe()&&In(Ue,{show:an,orderId:Dn,onCancel:function(){var e=(0,ce.W6)("".concat(K.ps.PAYPAL_ACCOUNT_CANCEL,":").concat(K.ps.CLICK),K.ps.PAYPAL_ACCOUNT_CANCEL);ln(!1),i(e)},onPaypalSync:function(){var e=Le(Dn,X),t=(0,Me.w)(Dn,e,we),n=(0,ce.W6)("".concat(K.ps.PAYPAL_ACCOUNT_CONTINUE,":").concat(K.ps.CLICK),K.ps.PAYPAL_ACCOUNT_CONTINUE);i(n),qe(t)}}))})),Nn=xn.queryCollection;Nn.merge(An.Ru.queryCollection),Nn.merge(P.A.queryCollection),Nn.merge(On.queryCollection),Nn.merge(O.J.queryCollection),Nn.merge(pt.O.queryCollection),Nn.merge(mt.N.queryCollection),Nn.merge(Z.queryCollection),Nn.merge(Ue.queryCollection),Nn.merge(ue.queryCollection),Nn.merge(ut.queryCollection),Nn.merge(ft.V.queryCollection),Nn.merge(q.x.queryCollection);var Rn=n(49644),Dn=n(90325),wn=n(58886),Ln=n(47565),kn=n(19014),Un=n(6804),Mn=n(57332),jn=n(94945),Fn=n(46576),Zn=n(59205),Bn=u.createElement;function Wn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Yn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wn(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var qn=function(){return(0,Fn.Vk)(),(0,ct.bW)(),Un.kg.info("Server received I2T Payment Page load request"),Bn(xn,null)};function Gn(e,t){e.info((0,Dn.W1)(t),"Payment Page Offers Response")}qn.getInitialProps=function(){var e=(0,l.Z)(o().mark((function e(t){var n,r,i,l,u,c,f,m,v,y,g,C,T,h,P,E,O,_,S,A,I,x,N,R,D,w,L,U,M,j,F,Z,B,W,Y,q,G,H,K,z;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.apolloClient,i=t.features,l=void 0===i?[]:i,u=t.res,c=t.store,f=t.pathname,m=t.logger,null===u||void 0===u||!u.writableEnded){e.next=3;break}return e.abrupt("return");case 3:return v=c.getState(),y=(0,k.mT)(v),g=(0,k.n$)(v),C=(0,de.yq)(v),T=(0,ee.et)(v),h=(0,de.i2)(v),P=(0,de.tD)(v),E=(0,ee.PQ)(v),O=(0,de.vl)(v),e.next=14,(0,wn.C)(v,t.logger);case 14:return _=e.sent,S=(0,Ln.j)(v,l.includes(d.R.UC_FLEXIBLE_PROMOTIONS)),A=null===f||void 0===f?void 0:f.replace(/^\//,""),I=(0,kn.Xx)(A),x=r.query({query:p.l,variables:(0,p.q)({country:y,locale:g,offerIds:C,userId:T.userId,clientId:h,svar:P,promotionCodes:S,useTestCampaign:l.includes(d.R.P_UC_USE_TEST_CAMPAIGNS)}),context:Yn({},_)}),N=r.query({query:se.nk,variables:(0,se.Tq)({country:y}),context:Yn({},_)}),R=null===(n=O[s().app.CURRENT_SUBSCRIPTION_IDS.name])||void 0===n?void 0:n.length,D=I&&1===R&&(0,X.FG)(r,y,T.userId,g),e.next=24,Promise.all([x,N,D]);case 24:return w=e.sent,L=(0,a.Z)(w,2),U=L[0],M=L[1],v=c.getState(),E=(0,ee.PQ)(v),e.next=32,(0,wn.C)(v,t.logger);case 32:if(_=e.sent,!(j=(null===U||void 0===U?void 0:U.errors)||(null===M||void 0===M?void 0:M.errors))){e.next=39;break}return F={currentRoute:Mn.Z.PAYMENT},e.abrupt("return",{error:(0,me.S2)(j,r,c,F)});case 39:if(Y=U.data.commitmentVariantsOffers,q=Y.resolvedSourceOfferIds,G=Y.result,H=(0,Dn.IG)(null===G||void 0===G||null===(Z=G[0])||void 0===Z||null===(B=Z.offers)||void 0===B||null===(W=B[0])||void 0===W?void 0:W.offer),c.dispatch((0,b.fC)(H)),(0,jn.M)(t,q),null!==G&&void 0!==G&&G.length){e.next=45;break}throw(0,Rn.n)();case 45:return Gn(m,U.data.commitmentVariantsOffers),K=r.query({query:se.N4,context:Yn({},_),variables:(0,se.Tj)({country:y,offerIds:q,isAuthenticated:E,isI2T:I})}).catch((function(){return null})),e.next=49,Promise.all([K]);case 49:z=I?Mn.Z.TEAMS_PLAN_PAYMENT:Mn.Z.PAYMENT,(0,re.OK)(t,z,{features:l,stepBackward:!0});case 51:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var Hn=(0,Zn.O)(xn.queryCollection,Mn.Z.PAYMENT)(qn)},75295:function(e,t,n){"use strict";n.d(t,{Y:function(){return f}});var r=n(809),o=n.n(r),a=n(92447),i=n(19529);function l(){return{expiry:Number.MAX_SAFE_INTEGER,tokenPromise:null}}var u=l();function c(e,t){return i.Z.getImsServiceToken(e,t)}function s(){return!u.tokenPromise||Date.now()>u.expiry}function d(e){return Date.now()+1e3*e.expires_in/1.2}function p(){u=l()}function f(){return m.apply(this,arguments)}function m(){return(m=(0,a.Z)(o().mark((function e(){var t,n,r,a,i=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.length>0&&void 0!==i[0]?i[0]:{},n=i.length>1?i[1]:void 0,e.prev=2,!s()){e.next=12;break}return u.expiry=Number.MAX_SAFE_INTEGER,u.tokenPromise=c(t,n),e.next=8,u.tokenPromise;case 8:r=e.sent,u.expiry=d(r),e.next=15;break;case 12:return e.next=14,u.tokenPromise;case 14:r=e.sent;case 15:a=r.access_token,e.next=21;break;case 18:e.prev=18,e.t0=e.catch(2),p();case 21:return e.abrupt("return",a);case 22:case"end":return e.stop()}}),e,null,[[2,18]])})))).apply(this,arguments)}},19529:function(e,t,n){"use strict";n.d(t,{Z:function(){return h}});var r=n(809),o=n.n(r),a=n(92447),i=n(26265),l=n(49675),u=n(47130),c=n(60196);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var d,p=(0,u.Z)(),f=function(){var e=(0,a.Z)(o().mark((function e(t){var n,r,a,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.clone().json();case 3:n=e.sent,r=(0,c.oY)(t.url),a=new URLSearchParams(r.params).toString(),i=a?"".concat(r.url,"?").concat(a):"".concat(r.url),n&&d.info({data:n,path:i,status:t.status}),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(0);case 12:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),m={request:function(e,t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({agent:p,compress:!0},t);return d=null===t||void 0===t?void 0:t.logger,[e,n]},response:function(e){if(+(null===e||void 0===e?void 0:e.status)>=300)throw d&&f(e),e;return e}},v=n(1375),y=n(10975),g=n(80129);function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h=function(){var e=(0,l.Z)(m),t=function(){var e=(0,a.Z)(o().mark((function e(t,r){var a,i,l,u=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>2&&void 0!==u[2]?u[2]:{},i=u.length>3?u[3]:void 0,(l=T({},(0,v.Zb)(r))).authCode=t,e.abrupt("return",n(l,a,i));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),n=function(){var t=(0,a.Z)(o().mark((function t(n){var r,a,i,l=arguments;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=l.length>1&&void 0!==l[1]?l[1]:{},a=l.length>2?l[2]:void 0,i={grant_type:"authorization_code",code:n.authCode,client_id:n.clientId,client_secret:n.secret},t.next=5,e.post("".concat(n.domain,"/ims/token/v2?").concat((0,g.stringify)(i)),{headers:T({},r),logger:a});case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return T(T({},e),{},{getImsHealthCheck:function(t){var n=(0,v.Ib)();return e.get("".concat(n.domain,"/ims/healthcheck"),{headers:(0,i.Z)({},y.A.name.X_IMS_CLIENTID,n.clientId),timeout:l.L.IMS_HEALTH_CHECK_TIMEOUT,logger:t})},getImsProfileAndToken:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3?arguments[3]:void 0,a=(0,v.Zb)(n);return e.post("".concat(a.domain,"/ims/token/v3"),{body:(0,g.stringify)({grant_type:"aux_sid_exchange",client_id:a.clientId,client_secret:a.secret,aux_sid:t,scope:a.scopes,project_user_profile:!0}),headers:T({"Content-Type":"application/x-www-form-urlencoded"},r),timeout:l.L.SHORT_HTTP_TIMEOUT,logger:o})},getImsAccessToken:t,getImsProfileAndTokenFromImplicitJumpToken:function(t,n,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=arguments.length>4?arguments[4]:void 0,i=(0,v.Zb)(r),u={client_id:i.clientId};return e.get("".concat(i.domain,"/ims/jump/implicit/").concat(t,"?").concat((0,g.stringify)(u)),{headers:T({Authorization:"Bearer ".concat(n)},o),timeout:l.L.SHORT_HTTP_TIMEOUT,logger:a},{includeHeaders:!0})},getImsServiceToken:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=(0,v.Ib)();return n(r,e,t)}})}()},19917:function(){},65474:function(){},8777:function(){}}]);